!function(e,n){"$:nomunge";function t(e){return"string"==typeof e}function r(e){var n=v.call(arguments,1);return function(){return e.apply(this,n.concat(v.call(arguments)))}}function o(e){return e.replace(/^[^#]*#?(.*)$/,"$1")}function a(e){return e.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function i(r,o,a,i,c){var u,f,p,h,d;return i!==s?(p=a.match(r?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),d=p[3]||"",2===c&&t(i)?f=i.replace(r?R:E,""):(h=l(p[2]),i=t(i)?l[r?A:w](i):i,f=2===c?i:1===c?e.extend({},i,h):e.extend({},h,i),f=$(f),r&&(f=f.replace(g,y))),u=p[1]+(r?"#":f||!p[1]?"?":"")+f+d):u=o(a!==s?a:n[S][q]),u}function c(e,n,r){return n===s||"boolean"==typeof n?(r=n,n=$[e?A:w]()):n=t(n)?n.replace(e?R:E,""):n,l(n,r)}function u(n,r,o,a){return t(o)||"object"==typeof o||(a=o,o=r,r=s),this.each(function(){var t=e(this),i=r||m()[(this.nodeName||"").toLowerCase()]||"",c=i&&t.attr(i)||"";t.attr(i,$[n](c,o,a))})}var s,f,l,p,h,d,m,g,v=Array.prototype.slice,y=decodeURIComponent,$=e.param,b=e.bbq=e.bbq||{},x=e.event.special,j="hashchange",w="querystring",A="fragment",N="elemUrlAttr",S="location",q="href",C="src",E=/^.*\?|#.*$/g,R=/^.*\#/,U={};$[w]=r(i,0,a),$[A]=f=r(i,1,o),f.noEscape=function(n){n=n||"";var t=e.map(n.split(""),encodeURIComponent);g=new RegExp(t.join("|"),"g")},f.noEscape(",/"),e.deparam=l=function(n,t){var r={},o={"true":!0,"false":!1,"null":null};return e.each(n.replace(/\+/g," ").split("&"),function(n,a){var i,c=a.split("="),u=y(c[0]),f=r,l=0,p=u.split("]["),h=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[h])?(p[h]=p[h].replace(/\]$/,""),p=p.shift().split("[").concat(p),h=p.length-1):h=0,2===c.length)if(i=y(c[1]),t&&(i=i&&!isNaN(i)?+i:"undefined"===i?s:o[i]!==s?o[i]:i),h)for(;h>=l;l++)u=""===p[l]?f.length:p[l],f=f[u]=h>l?f[u]||(p[l+1]&&isNaN(p[l+1])?{}:[]):i;else e.isArray(r[u])?r[u].push(i):r[u]=r[u]!==s?[r[u],i]:i;else u&&(r[u]=t?s:"")}),r},l[w]=r(c,0),l[A]=p=r(c,1),e[N]||(e[N]=function(n){return e.extend(U,n)})({a:q,base:q,iframe:C,img:C,input:C,form:"action",link:q,script:C}),m=e[N],e.fn[w]=r(u,w),e.fn[A]=r(u,A),b.pushState=h=function(e,r){t(e)&&/^#/.test(e)&&r===s&&(r=2);var o=e!==s,a=f(n[S][q],o?e:{},o?r:2);n[S][q]=a+(/#/.test(a)?"":"#")},b.getState=d=function(e,n){return e===s||"boolean"==typeof e?p(e):p(n)[e]},b.removeState=function(n){var t={};n!==s&&(t=d(),e.each(e.isArray(n)?n:arguments,function(e,n){delete t[n]})),h(t,2)},x[j]=e.extend(x[j],{add:function(n){function t(e){var n=e[A]=f();e.getState=function(e,t){return e===s||"boolean"==typeof e?l(n,e):l(n,t)[e]},r.apply(this,arguments)}var r;return e.isFunction(n)?(r=n,t):(r=n.handler,void(n.handler=t))}})}(jQuery,this),function(e,n,t){"$:nomunge";function r(e){return e=e||n[i][u],e.replace(/^[^#]*#?(.*)$/,"$1")}var o,a=e.event.special,i="location",c="hashchange",u="href",s=e.browser,f=document.documentMode,l=s.msie&&(f===t||8>f),p="on"+c in n&&!l;e[c+"Delay"]=100,a[c]=e.extend(a[c],{setup:function(){return p?!1:void e(o.start)},teardown:function(){return p?!1:void e(o.stop)}}),o=function(){function t(){s=f=function(e){return e},l&&(a=e('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,f=function(){return r(a.document[i][u])},(s=function(e,n){if(e!==n){var t=a.document;t.open().close(),t[i].hash="#"+e}})(r()))}var o,a,s,f,p={};return p.start=function(){if(!o){var a=r();s||t(),function l(){var t=r(),p=f(a);t!==a?(s(a=t,p),e(n).trigger(c)):p!==a&&(n[i][u]=n[i][u].replace(/#.*/,"")+"#"+p),o=setTimeout(l,e[c+"Delay"])}()}},p.stop=function(){a||(o&&clearTimeout(o),o=0)},p}()}(jQuery,this);
!function(){for(var e,n=function(){},o=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],i=o.length,r=window.console=window.console||{};i--;)e=o[i],r[e]||(r[e]=n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5iYS1iYnEuanMiLCJwbHVnaW4tc3VwcG9ydC5qcyJdLCJuYW1lcyI6WyIkIiwid2luZG93IiwiaXNfc3RyaW5nIiwiYXJnIiwiY3VycnkiLCJmdW5jIiwiYXJncyIsImFwcyIsImNhbGwiLCJhcmd1bWVudHMiLCJhcHBseSIsInRoaXMiLCJjb25jYXQiLCJnZXRfZnJhZ21lbnQiLCJ1cmwiLCJyZXBsYWNlIiwiZ2V0X3F1ZXJ5c3RyaW5nIiwianFfcGFyYW1fc3ViIiwiaXNfZnJhZ21lbnQiLCJnZXRfZnVuYyIsInBhcmFtcyIsIm1lcmdlX21vZGUiLCJyZXN1bHQiLCJxcyIsIm1hdGNoZXMiLCJ1cmxfcGFyYW1zIiwiaGFzaCIsInVuZGVmaW5lZCIsIm1hdGNoIiwicmVfdHJpbV9mcmFnbWVudCIsInJlX3RyaW1fcXVlcnlzdHJpbmciLCJqcV9kZXBhcmFtIiwic3RyX2ZyYWdtZW50Iiwic3RyX3F1ZXJ5c3RyaW5nIiwiZXh0ZW5kIiwianFfcGFyYW0iLCJyZV9ub19lc2NhcGUiLCJkZWNvZGUiLCJzdHJfbG9jYXRpb24iLCJzdHJfaHJlZiIsImpxX2RlcGFyYW1fc3ViIiwidXJsX29yX3BhcmFtcyIsImNvZXJjZSIsImpxX2ZuX3N1YiIsIm1vZGUiLCJmb3JjZV9hdHRyIiwiZWFjaCIsInRoYXQiLCJhdHRyIiwianFfZWxlbVVybEF0dHIiLCJub2RlTmFtZSIsInRvTG93ZXJDYXNlIiwianFfcGFyYW1fZnJhZ21lbnQiLCJqcV9kZXBhcmFtX2ZyYWdtZW50IiwianFfYmJxX3B1c2hTdGF0ZSIsImpxX2JicV9nZXRTdGF0ZSIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJkZWNvZGVVUklDb21wb25lbnQiLCJwYXJhbSIsImpxX2JicSIsImJicSIsImpxX2V2ZW50X3NwZWNpYWwiLCJldmVudCIsInNwZWNpYWwiLCJzdHJfaGFzaGNoYW5nZSIsInN0cl9lbGVtVXJsQXR0ciIsInN0cl9zcmMiLCJlbGVtVXJsQXR0cl9jYWNoZSIsIm5vRXNjYXBlIiwiY2hhcnMiLCJhcnIiLCJtYXAiLCJzcGxpdCIsImVuY29kZVVSSUNvbXBvbmVudCIsIlJlZ0V4cCIsImpvaW4iLCJkZXBhcmFtIiwib2JqIiwiY29lcmNlX3R5cGVzIiwidHJ1ZSIsImZhbHNlIiwibnVsbCIsImoiLCJ2IiwidmFsIiwia2V5IiwiY3VyIiwiaSIsImtleXMiLCJrZXlzX2xhc3QiLCJsZW5ndGgiLCJ0ZXN0Iiwic2hpZnQiLCJpc05hTiIsImlzQXJyYXkiLCJwdXNoIiwiYSIsImJhc2UiLCJpZnJhbWUiLCJpbWciLCJpbnB1dCIsImZvcm0iLCJsaW5rIiwic2NyaXB0IiwiZm4iLCJwdXNoU3RhdGUiLCJoYXNfYXJncyIsImdldFN0YXRlIiwicmVtb3ZlU3RhdGUiLCJzdGF0ZSIsImFkZCIsImhhbmRsZU9iaiIsIm5ld19oYW5kbGVyIiwiZSIsIm9sZF9oYW5kbGVyIiwiaXNGdW5jdGlvbiIsImhhbmRsZXIiLCJqUXVlcnkiLCJmYWtlX29uaGFzaGNoYW5nZSIsImJyb3dzZXIiLCJkb2N1bWVudCIsImRvY3VtZW50TW9kZSIsImlzX29sZF9pZSIsIm1zaWUiLCJzdXBwb3J0c19vbmhhc2hjaGFuZ2UiLCJzZXR1cCIsInN0YXJ0IiwidGVhcmRvd24iLCJzdG9wIiwiaW5pdCIsInNldF9oaXN0b3J5IiwiZ2V0X2hpc3RvcnkiLCJoaWRlIiwiaW5zZXJ0QWZ0ZXIiLCJjb250ZW50V2luZG93IiwiaGlzdG9yeV9oYXNoIiwiZG9jIiwib3BlbiIsImNsb3NlIiwidGltZW91dF9pZCIsInNlbGYiLCJsYXN0X2hhc2giLCJsb29weSIsInRyaWdnZXIiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwibWV0aG9kIiwibm9vcCIsIm1ldGhvZHMiLCJjb25zb2xlIl0sIm1hcHBpbmdzIjoiQ0ErRUEsU0FBVUEsRUFBRUMsR0FDVixXQXFDQSxTQUFTQyxHQUFXQyxHQUNsQixNQUFzQixnQkFBUkEsR0FLaEIsUUFBU0MsR0FBT0MsR0FDZCxHQUFJQyxHQUFPQyxFQUFJQyxLQUFNQyxV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LGNBQWUsWUFBYSxRQUFTLFFBRTdDMUQsRUFBUzBELEVBQVExRCxPQUNqQjJELEVBQVd0SixPQUFPc0osUUFBVXRKLE9BQU9zSixZQUVoQzNELEtBQ0h3RCxFQUFTRSxFQUFRMUQsR0FHWjJELEVBQVFILEtBQ1RHLEVBQVFILEdBQVVDIiwiZmlsZSI6InBsdWdpbnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGpRdWVyeSBCQlE6IEJhY2sgQnV0dG9uICYgUXVlcnkgTGlicmFyeSAtIHYxLjIuMSAtIDIvMTcvMjAxMFxuICogaHR0cDovL2JlbmFsbWFuLmNvbS9wcm9qZWN0cy9qcXVlcnktYmJxLXBsdWdpbi9cbiAqIFxuICogQ29weXJpZ2h0IChjKSAyMDEwIFwiQ293Ym95XCIgQmVuIEFsbWFuXG4gKiBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cbiAqIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cbiAqL1xuXG4vLyBTY3JpcHQ6IGpRdWVyeSBCQlE6IEJhY2sgQnV0dG9uICYgUXVlcnkgTGlicmFyeVxuLy9cbi8vICpWZXJzaW9uOiAxLjIuMSwgTGFzdCB1cGRhdGVkOiAyLzE3LzIwMTAqXG4vLyBcbi8vIFByb2plY3QgSG9tZSAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vcHJvamVjdHMvanF1ZXJ5LWJicS1wbHVnaW4vXG4vLyBHaXRIdWIgICAgICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LWJicS9cbi8vIFNvdXJjZSAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktYmJxL3Jhdy9tYXN0ZXIvanF1ZXJ5LmJhLWJicS5qc1xuLy8gKE1pbmlmaWVkKSAgIC0gaHR0cDovL2dpdGh1Yi5jb20vY293Ym95L2pxdWVyeS1iYnEvcmF3L21hc3Rlci9qcXVlcnkuYmEtYmJxLm1pbi5qcyAoNC4wa2IpXG4vLyBcbi8vIEFib3V0OiBMaWNlbnNlXG4vLyBcbi8vIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hbixcbi8vIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBhbmQgR1BMIGxpY2Vuc2VzLlxuLy8gaHR0cDovL2JlbmFsbWFuLmNvbS9hYm91dC9saWNlbnNlL1xuLy8gXG4vLyBBYm91dDogRXhhbXBsZXNcbi8vIFxuLy8gVGhlc2Ugd29ya2luZyBleGFtcGxlcywgY29tcGxldGUgd2l0aCBmdWxseSBjb21tZW50ZWQgY29kZSwgaWxsdXN0cmF0ZSBhIGZld1xuLy8gd2F5cyBpbiB3aGljaCB0aGlzIHBsdWdpbiBjYW4gYmUgdXNlZC5cbi8vIFxuLy8gQmFzaWMgQUpBWCAgICAgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWJicS9leGFtcGxlcy9mcmFnbWVudC1iYXNpYy9cbi8vIEFkdmFuY2VkIEFKQVggIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1iYnEvZXhhbXBsZXMvZnJhZ21lbnQtYWR2YW5jZWQvXG4vLyBqUXVlcnkgVUkgVGFicyAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktYmJxL2V4YW1wbGVzL2ZyYWdtZW50LWpxdWVyeS11aS10YWJzL1xuLy8gRGVwYXJhbSAgICAgICAgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWJicS9leGFtcGxlcy9kZXBhcmFtL1xuLy8gXG4vLyBBYm91dDogU3VwcG9ydCBhbmQgVGVzdGluZ1xuLy8gXG4vLyBJbmZvcm1hdGlvbiBhYm91dCB3aGF0IHZlcnNpb24gb3IgdmVyc2lvbnMgb2YgalF1ZXJ5IHRoaXMgcGx1Z2luIGhhcyBiZWVuXG4vLyB0ZXN0ZWQgd2l0aCwgd2hhdCBicm93c2VycyBpdCBoYXMgYmVlbiB0ZXN0ZWQgaW4sIGFuZCB3aGVyZSB0aGUgdW5pdCB0ZXN0c1xuLy8gcmVzaWRlIChzbyB5b3UgY2FuIHRlc3QgaXQgeW91cnNlbGYpLlxuLy8gXG4vLyBqUXVlcnkgVmVyc2lvbnMgLSAxLjMuMiwgMS40LjEsIDEuNC4yXG4vLyBCcm93c2VycyBUZXN0ZWQgLSBJbnRlcm5ldCBFeHBsb3JlciA2LTgsIEZpcmVmb3ggMi0zLjcsIFNhZmFyaSAzLTQsXG4vLyAgICAgICAgICAgICAgICAgICBDaHJvbWUgNC01LCBPcGVyYSA5LjYtMTAuMS5cbi8vIFVuaXQgVGVzdHMgICAgICAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktYmJxL3VuaXQvXG4vLyBcbi8vIEFib3V0OiBSZWxlYXNlIEhpc3Rvcnlcbi8vIFxuLy8gMS4yLjEgLSAoMi8xNy8yMDEwKSBBY3R1YWxseSBmaXhlZCB0aGUgc3RhbGUgd2luZG93LmxvY2F0aW9uIFNhZmFyaSBidWcgZnJvbVxuLy8gICAgICAgICA8alF1ZXJ5IGhhc2hjaGFuZ2UgZXZlbnQ+IGluIEJCUSwgd2hpY2ggd2FzIHRoZSBtYWluIHJlYXNvbiBmb3IgdGhlXG4vLyAgICAgICAgIHByZXZpb3VzIHJlbGVhc2UhXG4vLyAxLjIgICAtICgyLzE2LzIwMTApIEludGVncmF0ZWQgPGpRdWVyeSBoYXNoY2hhbmdlIGV2ZW50PiB2MS4yLCB3aGljaCBmaXhlcyBhXG4vLyAgICAgICAgIFNhZmFyaSBidWcsIHRoZSBldmVudCBjYW4gbm93IGJlIGJvdW5kIGJlZm9yZSBET00gcmVhZHksIGFuZCBJRTYvN1xuLy8gICAgICAgICBwYWdlIHNob3VsZCBubyBsb25nZXIgc2Nyb2xsIHdoZW4gdGhlIGV2ZW50IGlzIGZpcnN0IGJvdW5kLiBBbHNvXG4vLyAgICAgICAgIGFkZGVkIHRoZSA8alF1ZXJ5LnBhcmFtLmZyYWdtZW50Lm5vRXNjYXBlPiBtZXRob2QsIGFuZCByZXdvcmtlZCB0aGVcbi8vICAgICAgICAgPGhhc2hjaGFuZ2UgZXZlbnQgKEJCUSk+IGludGVybmFsIFwiYWRkXCIgbWV0aG9kIHRvIGJlIGNvbXBhdGlibGUgd2l0aFxuLy8gICAgICAgICBjaGFuZ2VzIG1hZGUgdG8gdGhlIGpRdWVyeSAxLjQuMiBzcGVjaWFsIGV2ZW50cyBBUEkuXG4vLyAxLjEuMSAtICgxLzIyLzIwMTApIEludGVncmF0ZWQgPGpRdWVyeSBoYXNoY2hhbmdlIGV2ZW50PiB2MS4xLCB3aGljaCBmaXhlcyBhblxuLy8gICAgICAgICBvYnNjdXJlIElFOCBFbXVsYXRlSUU3IG1ldGEgdGFnIGNvbXBhdGliaWxpdHkgbW9kZSBidWcuXG4vLyAxLjEgICAtICgxLzkvMjAxMCkgQnJva2Ugb3V0IHRoZSBqUXVlcnkgQkJRIGV2ZW50LnNwZWNpYWwgPGhhc2hjaGFuZ2UgZXZlbnQ+XG4vLyAgICAgICAgIGZ1bmN0aW9uYWxpdHkgaW50byBhIHNlcGFyYXRlIHBsdWdpbiBmb3IgdXNlcnMgd2hvIHdhbnQganVzdCB0aGVcbi8vICAgICAgICAgYmFzaWMgZXZlbnQgJiBiYWNrIGJ1dHRvbiBzdXBwb3J0LCB3aXRob3V0IGFsbCB0aGUgZXh0cmEgYXdlc29tZW5lc3Ncbi8vICAgICAgICAgdGhhdCBCQlEgcHJvdmlkZXMuIFRoaXMgcGx1Z2luIHdpbGwgYmUgaW5jbHVkZWQgYXMgcGFydCBvZiBqUXVlcnkgQkJRLFxuLy8gICAgICAgICBidXQgYWxzbyBiZSBhdmFpbGFibGUgc2VwYXJhdGVseS4gU2VlIDxqUXVlcnkgaGFzaGNoYW5nZSBldmVudD5cbi8vICAgICAgICAgcGx1Z2luIGZvciBtb3JlIGluZm9ybWF0aW9uLiBBbHNvIGFkZGVkIHRoZSA8alF1ZXJ5LmJicS5yZW1vdmVTdGF0ZT5cbi8vICAgICAgICAgbWV0aG9kIGFuZCBhZGRlZCBhZGRpdGlvbmFsIDxqUXVlcnkuZGVwYXJhbT4gZXhhbXBsZXMuXG4vLyAxLjAuMyAtICgxMi8yLzIwMDkpIEZpeGVkIGFuIGlzc3VlIGluIElFIDYgd2hlcmUgbG9jYXRpb24uc2VhcmNoIGFuZFxuLy8gICAgICAgICBsb2NhdGlvbi5oYXNoIHdvdWxkIHJlcG9ydCBpbmNvcnJlY3RseSBpZiB0aGUgaGFzaCBjb250YWluZWQgdGhlID9cbi8vICAgICAgICAgY2hhcmFjdGVyLiBBbHNvIDxqUXVlcnkucGFyYW0ucXVlcnlzdHJpbmc+IGFuZCA8alF1ZXJ5LnBhcmFtLmZyYWdtZW50PlxuLy8gICAgICAgICB3aWxsIG5vIGxvbmdlciBwYXJzZSBwYXJhbXMgb3V0IG9mIGEgVVJMIHRoYXQgZG9lc24ndCBjb250YWluID8gb3IgIyxcbi8vICAgICAgICAgcmVzcGVjdGl2ZWx5LlxuLy8gMS4wLjIgLSAoMTAvMTAvMjAwOSkgRml4ZWQgYW4gaXNzdWUgaW4gSUUgNi83IHdoZXJlIHRoZSBoaWRkZW4gSUZSQU1FIGNhdXNlZFxuLy8gICAgICAgICBhIFwiVGhpcyBwYWdlIGNvbnRhaW5zIGJvdGggc2VjdXJlIGFuZCBub25zZWN1cmUgaXRlbXMuXCIgd2FybmluZyB3aGVuXG4vLyAgICAgICAgIHVzZWQgb24gYW4gaHR0cHM6Ly8gcGFnZS5cbi8vIDEuMC4xIC0gKDEwLzcvMjAwOSkgRml4ZWQgYW4gaXNzdWUgaW4gSUUgOC4gU2luY2UgYm90aCBcIklFN1wiIGFuZCBcIklFOFxuLy8gICAgICAgICBDb21wYXRpYmlsaXR5IFZpZXdcIiBtb2RlcyBlcnJvbmVvdXNseSByZXBvcnQgdGhhdCB0aGUgYnJvd3NlclxuLy8gICAgICAgICBzdXBwb3J0cyB0aGUgbmF0aXZlIHdpbmRvdy5vbmhhc2hjaGFuZ2UgZXZlbnQsIGEgc2xpZ2h0bHkgbW9yZVxuLy8gICAgICAgICByb2J1c3QgdGVzdCBuZWVkZWQgdG8gYmUgYWRkZWQuXG4vLyAxLjAgICAtICgxMC8yLzIwMDkpIEluaXRpYWwgcmVsZWFzZVxuXG4oZnVuY3Rpb24oJCx3aW5kb3cpe1xuICAnJDpub211bmdlJzsgLy8gVXNlZCBieSBZVUkgY29tcHJlc3Nvci5cbiAgXG4gIC8vIFNvbWUgY29udmVuaWVudCBzaG9ydGN1dHMuXG4gIHZhciB1bmRlZmluZWQsXG4gICAgYXBzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLFxuICAgIGRlY29kZSA9IGRlY29kZVVSSUNvbXBvbmVudCxcbiAgICBcbiAgICAvLyBNZXRob2QgLyBvYmplY3QgcmVmZXJlbmNlcy5cbiAgICBqcV9wYXJhbSA9ICQucGFyYW0sXG4gICAganFfcGFyYW1fZnJhZ21lbnQsXG4gICAganFfZGVwYXJhbSxcbiAgICBqcV9kZXBhcmFtX2ZyYWdtZW50LFxuICAgIGpxX2JicSA9ICQuYmJxID0gJC5iYnEgfHwge30sXG4gICAganFfYmJxX3B1c2hTdGF0ZSxcbiAgICBqcV9iYnFfZ2V0U3RhdGUsXG4gICAganFfZWxlbVVybEF0dHIsXG4gICAganFfZXZlbnRfc3BlY2lhbCA9ICQuZXZlbnQuc3BlY2lhbCxcbiAgICBcbiAgICAvLyBSZXVzZWQgc3RyaW5ncy5cbiAgICBzdHJfaGFzaGNoYW5nZSA9ICdoYXNoY2hhbmdlJyxcbiAgICBzdHJfcXVlcnlzdHJpbmcgPSAncXVlcnlzdHJpbmcnLFxuICAgIHN0cl9mcmFnbWVudCA9ICdmcmFnbWVudCcsXG4gICAgc3RyX2VsZW1VcmxBdHRyID0gJ2VsZW1VcmxBdHRyJyxcbiAgICBzdHJfbG9jYXRpb24gPSAnbG9jYXRpb24nLFxuICAgIHN0cl9ocmVmID0gJ2hyZWYnLFxuICAgIHN0cl9zcmMgPSAnc3JjJyxcbiAgICBcbiAgICAvLyBSZXVzZWQgUmVnRXhwLlxuICAgIHJlX3RyaW1fcXVlcnlzdHJpbmcgPSAvXi4qXFw/fCMuKiQvZyxcbiAgICByZV90cmltX2ZyYWdtZW50ID0gL14uKlxcIy8sXG4gICAgcmVfbm9fZXNjYXBlLFxuICAgIFxuICAgIC8vIFVzZWQgYnkgalF1ZXJ5LmVsZW1VcmxBdHRyLlxuICAgIGVsZW1VcmxBdHRyX2NhY2hlID0ge307XG4gIFxuICAvLyBBIGZldyBjb21tb25seSB1c2VkIGJpdHMsIGJyb2tlbiBvdXQgdG8gaGVscCByZWR1Y2UgbWluaWZpZWQgZmlsZSBzaXplLlxuICBcbiAgZnVuY3Rpb24gaXNfc3RyaW5nKCBhcmcgKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnO1xuICB9O1xuICBcbiAgLy8gV2h5IHdyaXRlIHRoZSBzYW1lIGZ1bmN0aW9uIHR3aWNlPyBMZXQncyBjdXJyeSEgTW1tbSwgY3VycnkuLlxuICBcbiAgZnVuY3Rpb24gY3VycnkoIGZ1bmMgKSB7XG4gICAgdmFyIGFyZ3MgPSBhcHMuY2FsbCggYXJndW1lbnRzLCAxICk7XG4gICAgXG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkoIHRoaXMsIGFyZ3MuY29uY2F0KCBhcHMuY2FsbCggYXJndW1lbnRzICkgKSApO1xuICAgIH07XG4gIH07XG4gIFxuICAvLyBHZXQgbG9jYXRpb24uaGFzaCAob3Igd2hhdCB5b3UnZCBleHBlY3QgbG9jYXRpb24uaGFzaCB0byBiZSkgc2FucyBhbnlcbiAgLy8gbGVhZGluZyAjLiBUaGFua3MgZm9yIG1ha2luZyB0aGlzIG5lY2Vzc2FyeSwgRmlyZWZveCFcbiAgZnVuY3Rpb24gZ2V0X2ZyYWdtZW50KCB1cmwgKSB7XG4gICAgcmV0dXJuIHVybC5yZXBsYWNlKCAvXlteI10qIz8oLiopJC8sICckMScgKTtcbiAgfTtcbiAgXG4gIC8vIEdldCBsb2NhdGlvbi5zZWFyY2ggKG9yIHdoYXQgeW91J2QgZXhwZWN0IGxvY2F0aW9uLnNlYXJjaCB0byBiZSkgc2FucyBhbnlcbiAgLy8gbGVhZGluZyAjLiBUaGFua3MgZm9yIG1ha2luZyB0aGlzIG5lY2Vzc2FyeSwgSUU2IVxuICBmdW5jdGlvbiBnZXRfcXVlcnlzdHJpbmcoIHVybCApIHtcbiAgICByZXR1cm4gdXJsLnJlcGxhY2UoIC8oPzpeW14/I10qXFw/KFteI10qKS4qJCk/LiovLCAnJDEnICk7XG4gIH07XG4gIFxuICAvLyBTZWN0aW9uOiBQYXJhbSAodG8gc3RyaW5nKVxuICAvLyBcbiAgLy8gTWV0aG9kOiBqUXVlcnkucGFyYW0ucXVlcnlzdHJpbmdcbiAgLy8gXG4gIC8vIFJldHJpZXZlIHRoZSBxdWVyeSBzdHJpbmcgZnJvbSBhIFVSTCBvciBpZiBubyBhcmd1bWVudHMgYXJlIHBhc3NlZCwgdGhlXG4gIC8vIGN1cnJlbnQgd2luZG93LmxvY2F0aW9uLlxuICAvLyBcbiAgLy8gVXNhZ2U6XG4gIC8vIFxuICAvLyA+IGpRdWVyeS5wYXJhbS5xdWVyeXN0cmluZyggWyB1cmwgXSApO1xuICAvLyBcbiAgLy8gQXJndW1lbnRzOlxuICAvLyBcbiAgLy8gIHVybCAtIChTdHJpbmcpIEEgVVJMIGNvbnRhaW5pbmcgcXVlcnkgc3RyaW5nIHBhcmFtcyB0byBiZSBwYXJzZWQuIElmIHVybFxuICAvLyAgICBpcyBub3QgcGFzc2VkLCB0aGUgY3VycmVudCB3aW5kb3cubG9jYXRpb24gaXMgdXNlZC5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgKFN0cmluZykgVGhlIHBhcnNlZCBxdWVyeSBzdHJpbmcsIHdpdGggYW55IGxlYWRpbmcgXCI/XCIgcmVtb3ZlZC5cbiAgLy9cbiAgXG4gIC8vIE1ldGhvZDogalF1ZXJ5LnBhcmFtLnF1ZXJ5c3RyaW5nIChidWlsZCB1cmwpXG4gIC8vIFxuICAvLyBNZXJnZSBhIFVSTCwgd2l0aCBvciB3aXRob3V0IHByZS1leGlzdGluZyBxdWVyeSBzdHJpbmcgcGFyYW1zLCBwbHVzIGFueVxuICAvLyBvYmplY3QsIHBhcmFtcyBzdHJpbmcgb3IgVVJMIGNvbnRhaW5pbmcgcXVlcnkgc3RyaW5nIHBhcmFtcyBpbnRvIGEgbmV3IFVSTC5cbiAgLy8gXG4gIC8vIFVzYWdlOlxuICAvLyBcbiAgLy8gPiBqUXVlcnkucGFyYW0ucXVlcnlzdHJpbmcoIHVybCwgcGFyYW1zIFssIG1lcmdlX21vZGUgXSApO1xuICAvLyBcbiAgLy8gQXJndW1lbnRzOlxuICAvLyBcbiAgLy8gIHVybCAtIChTdHJpbmcpIEEgdmFsaWQgVVJMIGZvciBwYXJhbXMgdG8gYmUgbWVyZ2VkIGludG8uIFRoaXMgVVJMIG1heVxuICAvLyAgICBjb250YWluIGEgcXVlcnkgc3RyaW5nIGFuZC9vciBmcmFnbWVudCAoaGFzaCkuXG4gIC8vICBwYXJhbXMgLSAoU3RyaW5nKSBBIHBhcmFtcyBzdHJpbmcgb3IgVVJMIGNvbnRhaW5pbmcgcXVlcnkgc3RyaW5nIHBhcmFtcyB0b1xuICAvLyAgICBiZSBtZXJnZWQgaW50byB1cmwuXG4gIC8vICBwYXJhbXMgLSAoT2JqZWN0KSBBIHBhcmFtcyBvYmplY3QgdG8gYmUgbWVyZ2VkIGludG8gdXJsLlxuICAvLyAgbWVyZ2VfbW9kZSAtIChOdW1iZXIpIE1lcmdlIGJlaGF2aW9yIGRlZmF1bHRzIHRvIDAgaWYgbWVyZ2VfbW9kZSBpcyBub3RcbiAgLy8gICAgc3BlY2lmaWVkLCBhbmQgaXMgYXMtZm9sbG93czpcbiAgLy8gXG4gIC8vICAgICogMDogcGFyYW1zIGluIHRoZSBwYXJhbXMgYXJndW1lbnQgd2lsbCBvdmVycmlkZSBhbnkgcXVlcnkgc3RyaW5nXG4gIC8vICAgICAgICAgcGFyYW1zIGluIHVybC5cbiAgLy8gICAgKiAxOiBhbnkgcXVlcnkgc3RyaW5nIHBhcmFtcyBpbiB1cmwgd2lsbCBvdmVycmlkZSBwYXJhbXMgaW4gdGhlIHBhcmFtc1xuICAvLyAgICAgICAgIGFyZ3VtZW50LlxuICAvLyAgICAqIDI6IHBhcmFtcyBhcmd1bWVudCB3aWxsIGNvbXBsZXRlbHkgcmVwbGFjZSBhbnkgcXVlcnkgc3RyaW5nIGluIHVybC5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgKFN0cmluZykgRWl0aGVyIGEgcGFyYW1zIHN0cmluZyB3aXRoIHVybGVuY29kZWQgZGF0YSBvciBhIFVSTCB3aXRoIGFcbiAgLy8gICAgdXJsZW5jb2RlZCBxdWVyeSBzdHJpbmcgaW4gdGhlIGZvcm1hdCAnYT1iJmM9ZCZlPWYnLlxuICBcbiAgLy8gTWV0aG9kOiBqUXVlcnkucGFyYW0uZnJhZ21lbnRcbiAgLy8gXG4gIC8vIFJldHJpZXZlIHRoZSBmcmFnbWVudCAoaGFzaCkgZnJvbSBhIFVSTCBvciBpZiBubyBhcmd1bWVudHMgYXJlIHBhc3NlZCwgdGhlXG4gIC8vIGN1cnJlbnQgd2luZG93LmxvY2F0aW9uLlxuICAvLyBcbiAgLy8gVXNhZ2U6XG4gIC8vIFxuICAvLyA+IGpRdWVyeS5wYXJhbS5mcmFnbWVudCggWyB1cmwgXSApO1xuICAvLyBcbiAgLy8gQXJndW1lbnRzOlxuICAvLyBcbiAgLy8gIHVybCAtIChTdHJpbmcpIEEgVVJMIGNvbnRhaW5pbmcgZnJhZ21lbnQgKGhhc2gpIHBhcmFtcyB0byBiZSBwYXJzZWQuIElmXG4gIC8vICAgIHVybCBpcyBub3QgcGFzc2VkLCB0aGUgY3VycmVudCB3aW5kb3cubG9jYXRpb24gaXMgdXNlZC5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgKFN0cmluZykgVGhlIHBhcnNlZCBmcmFnbWVudCAoaGFzaCkgc3RyaW5nLCB3aXRoIGFueSBsZWFkaW5nIFwiI1wiIHJlbW92ZWQuXG4gIFxuICAvLyBNZXRob2Q6IGpRdWVyeS5wYXJhbS5mcmFnbWVudCAoYnVpbGQgdXJsKVxuICAvLyBcbiAgLy8gTWVyZ2UgYSBVUkwsIHdpdGggb3Igd2l0aG91dCBwcmUtZXhpc3RpbmcgZnJhZ21lbnQgKGhhc2gpIHBhcmFtcywgcGx1cyBhbnlcbiAgLy8gb2JqZWN0LCBwYXJhbXMgc3RyaW5nIG9yIFVSTCBjb250YWluaW5nIGZyYWdtZW50IChoYXNoKSBwYXJhbXMgaW50byBhIG5ld1xuICAvLyBVUkwuXG4gIC8vIFxuICAvLyBVc2FnZTpcbiAgLy8gXG4gIC8vID4galF1ZXJ5LnBhcmFtLmZyYWdtZW50KCB1cmwsIHBhcmFtcyBbLCBtZXJnZV9tb2RlIF0gKTtcbiAgLy8gXG4gIC8vIEFyZ3VtZW50czpcbiAgLy8gXG4gIC8vICB1cmwgLSAoU3RyaW5nKSBBIHZhbGlkIFVSTCBmb3IgcGFyYW1zIHRvIGJlIG1lcmdlZCBpbnRvLiBUaGlzIFVSTCBtYXlcbiAgLy8gICAgY29udGFpbiBhIHF1ZXJ5IHN0cmluZyBhbmQvb3IgZnJhZ21lbnQgKGhhc2gpLlxuICAvLyAgcGFyYW1zIC0gKFN0cmluZykgQSBwYXJhbXMgc3RyaW5nIG9yIFVSTCBjb250YWluaW5nIGZyYWdtZW50IChoYXNoKSBwYXJhbXNcbiAgLy8gICAgdG8gYmUgbWVyZ2VkIGludG8gdXJsLlxuICAvLyAgcGFyYW1zIC0gKE9iamVjdCkgQSBwYXJhbXMgb2JqZWN0IHRvIGJlIG1lcmdlZCBpbnRvIHVybC5cbiAgLy8gIG1lcmdlX21vZGUgLSAoTnVtYmVyKSBNZXJnZSBiZWhhdmlvciBkZWZhdWx0cyB0byAwIGlmIG1lcmdlX21vZGUgaXMgbm90XG4gIC8vICAgIHNwZWNpZmllZCwgYW5kIGlzIGFzLWZvbGxvd3M6XG4gIC8vIFxuICAvLyAgICAqIDA6IHBhcmFtcyBpbiB0aGUgcGFyYW1zIGFyZ3VtZW50IHdpbGwgb3ZlcnJpZGUgYW55IGZyYWdtZW50IChoYXNoKVxuICAvLyAgICAgICAgIHBhcmFtcyBpbiB1cmwuXG4gIC8vICAgICogMTogYW55IGZyYWdtZW50IChoYXNoKSBwYXJhbXMgaW4gdXJsIHdpbGwgb3ZlcnJpZGUgcGFyYW1zIGluIHRoZVxuICAvLyAgICAgICAgIHBhcmFtcyBhcmd1bWVudC5cbiAgLy8gICAgKiAyOiBwYXJhbXMgYXJndW1lbnQgd2lsbCBjb21wbGV0ZWx5IHJlcGxhY2UgYW55IHF1ZXJ5IHN0cmluZyBpbiB1cmwuXG4gIC8vIFxuICAvLyBSZXR1cm5zOlxuICAvLyBcbiAgLy8gIChTdHJpbmcpIEVpdGhlciBhIHBhcmFtcyBzdHJpbmcgd2l0aCB1cmxlbmNvZGVkIGRhdGEgb3IgYSBVUkwgd2l0aCBhXG4gIC8vICAgIHVybGVuY29kZWQgZnJhZ21lbnQgKGhhc2gpIGluIHRoZSBmb3JtYXQgJ2E9YiZjPWQmZT1mJy5cbiAgXG4gIGZ1bmN0aW9uIGpxX3BhcmFtX3N1YiggaXNfZnJhZ21lbnQsIGdldF9mdW5jLCB1cmwsIHBhcmFtcywgbWVyZ2VfbW9kZSApIHtcbiAgICB2YXIgcmVzdWx0LFxuICAgICAgcXMsXG4gICAgICBtYXRjaGVzLFxuICAgICAgdXJsX3BhcmFtcyxcbiAgICAgIGhhc2g7XG4gICAgXG4gICAgaWYgKCBwYXJhbXMgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgIC8vIEJ1aWxkIFVSTCBieSBtZXJnaW5nIHBhcmFtcyBpbnRvIHVybCBzdHJpbmcuXG4gICAgICBcbiAgICAgIC8vIG1hdGNoZXNbMV0gPSB1cmwgcGFydCB0aGF0IHByZWNlZGVzIHBhcmFtcywgbm90IGluY2x1ZGluZyB0cmFpbGluZyA/LyNcbiAgICAgIC8vIG1hdGNoZXNbMl0gPSBwYXJhbXMsIG5vdCBpbmNsdWRpbmcgbGVhZGluZyA/LyNcbiAgICAgIC8vIG1hdGNoZXNbM10gPSBpZiBpbiAncXVlcnlzdHJpbmcnIG1vZGUsIGhhc2ggaW5jbHVkaW5nIGxlYWRpbmcgIywgb3RoZXJ3aXNlICcnXG4gICAgICBtYXRjaGVzID0gdXJsLm1hdGNoKCBpc19mcmFnbWVudCA/IC9eKFteI10qKVxcIz8oLiopJC8gOiAvXihbXiM/XSopXFw/PyhbXiNdKikoIz8uKikvICk7XG4gICAgICBcbiAgICAgIC8vIEdldCB0aGUgaGFzaCBpZiBpbiAncXVlcnlzdHJpbmcnIG1vZGUsIGFuZCBpdCBleGlzdHMuXG4gICAgICBoYXNoID0gbWF0Y2hlc1szXSB8fCAnJztcbiAgICAgIFxuICAgICAgaWYgKCBtZXJnZV9tb2RlID09PSAyICYmIGlzX3N0cmluZyggcGFyYW1zICkgKSB7XG4gICAgICAgIC8vIElmIG1lcmdlX21vZGUgaXMgMiBhbmQgcGFyYW1zIGlzIGEgc3RyaW5nLCBtZXJnZSB0aGUgZnJhZ21lbnQgLyBxdWVyeVxuICAgICAgICAvLyBzdHJpbmcgaW50byB0aGUgVVJMIHdob2xlc2FsZSwgd2l0aG91dCBjb252ZXJ0aW5nIGl0IGludG8gYW4gb2JqZWN0LlxuICAgICAgICBxcyA9IHBhcmFtcy5yZXBsYWNlKCBpc19mcmFnbWVudCA/IHJlX3RyaW1fZnJhZ21lbnQgOiByZV90cmltX3F1ZXJ5c3RyaW5nLCAnJyApO1xuICAgICAgICBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENvbnZlcnQgcmVsZXZhbnQgcGFyYW1zIGluIHVybCB0byBvYmplY3QuXG4gICAgICAgIHVybF9wYXJhbXMgPSBqcV9kZXBhcmFtKCBtYXRjaGVzWzJdICk7XG4gICAgICAgIFxuICAgICAgICBwYXJhbXMgPSBpc19zdHJpbmcoIHBhcmFtcyApXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ29udmVydCBwYXNzZWQgcGFyYW1zIHN0cmluZyBpbnRvIG9iamVjdC5cbiAgICAgICAgICA/IGpxX2RlcGFyYW1bIGlzX2ZyYWdtZW50ID8gc3RyX2ZyYWdtZW50IDogc3RyX3F1ZXJ5c3RyaW5nIF0oIHBhcmFtcyApXG4gICAgICAgICAgXG4gICAgICAgICAgLy8gUGFzc2VkIHBhcmFtcyBvYmplY3QuXG4gICAgICAgICAgOiBwYXJhbXM7XG4gICAgICAgIFxuICAgICAgICBxcyA9IG1lcmdlX21vZGUgPT09IDIgPyBwYXJhbXMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBwYXNzZWQgcGFyYW1zIHJlcGxhY2UgdXJsIHBhcmFtc1xuICAgICAgICAgIDogbWVyZ2VfbW9kZSA9PT0gMSAgPyAkLmV4dGVuZCgge30sIHBhcmFtcywgdXJsX3BhcmFtcyApICAvLyB1cmwgcGFyYW1zIG92ZXJyaWRlIHBhc3NlZCBwYXJhbXNcbiAgICAgICAgICA6ICQuZXh0ZW5kKCB7fSwgdXJsX3BhcmFtcywgcGFyYW1zICk7ICAgICAgICAgICAgICAgICAgICAgLy8gcGFzc2VkIHBhcmFtcyBvdmVycmlkZSB1cmwgcGFyYW1zXG4gICAgICAgIFxuICAgICAgICAvLyBDb252ZXJ0IHBhcmFtcyBvYmplY3QgdG8gYSBzdHJpbmcuXG4gICAgICAgIHFzID0ganFfcGFyYW0oIHFzICk7XG4gICAgICAgIFxuICAgICAgICAvLyBVbmVzY2FwZSBjaGFyYWN0ZXJzIHNwZWNpZmllZCB2aWEgJC5wYXJhbS5ub0VzY2FwZS4gU2luY2Ugb25seSBoYXNoLVxuICAgICAgICAvLyBoaXN0b3J5IHVzZXJzIGhhdmUgcmVxdWVzdGVkIHRoaXMgZmVhdHVyZSwgaXQncyBvbmx5IGVuYWJsZWQgZm9yXG4gICAgICAgIC8vIGZyYWdtZW50LXJlbGF0ZWQgcGFyYW1zIHN0cmluZ3MuXG4gICAgICAgIGlmICggaXNfZnJhZ21lbnQgKSB7XG4gICAgICAgICAgcXMgPSBxcy5yZXBsYWNlKCByZV9ub19lc2NhcGUsIGRlY29kZSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEJ1aWxkIFVSTCBmcm9tIHRoZSBiYXNlIHVybCwgcXVlcnlzdHJpbmcgYW5kIGhhc2guIEluICdxdWVyeXN0cmluZydcbiAgICAgIC8vIG1vZGUsID8gaXMgb25seSBhZGRlZCBpZiBhIHF1ZXJ5IHN0cmluZyBleGlzdHMuIEluICdmcmFnbWVudCcgbW9kZSwgI1xuICAgICAgLy8gaXMgYWx3YXlzIGFkZGVkLlxuICAgICAgcmVzdWx0ID0gbWF0Y2hlc1sxXSArICggaXNfZnJhZ21lbnQgPyAnIycgOiBxcyB8fCAhbWF0Y2hlc1sxXSA/ICc/JyA6ICcnICkgKyBxcyArIGhhc2g7XG4gICAgICBcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgVVJMIHdhcyBwYXNzZWQgaW4sIHBhcnNlIHBhcmFtcyBmcm9tIFVSTCBzdHJpbmcsIG90aGVyd2lzZSBwYXJzZVxuICAgICAgLy8gcGFyYW1zIGZyb20gd2luZG93LmxvY2F0aW9uLlxuICAgICAgcmVzdWx0ID0gZ2V0X2Z1bmMoIHVybCAhPT0gdW5kZWZpbmVkID8gdXJsIDogd2luZG93WyBzdHJfbG9jYXRpb24gXVsgc3RyX2hyZWYgXSApO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBcbiAganFfcGFyYW1bIHN0cl9xdWVyeXN0cmluZyBdICAgICAgICAgICAgICAgICAgPSBjdXJyeSgganFfcGFyYW1fc3ViLCAwLCBnZXRfcXVlcnlzdHJpbmcgKTtcbiAganFfcGFyYW1bIHN0cl9mcmFnbWVudCBdID0ganFfcGFyYW1fZnJhZ21lbnQgPSBjdXJyeSgganFfcGFyYW1fc3ViLCAxLCBnZXRfZnJhZ21lbnQgKTtcbiAgXG4gIC8vIE1ldGhvZDogalF1ZXJ5LnBhcmFtLmZyYWdtZW50Lm5vRXNjYXBlXG4gIC8vIFxuICAvLyBTcGVjaWZ5IGNoYXJhY3RlcnMgdGhhdCB3aWxsIGJlIGxlZnQgdW5lc2NhcGVkIHdoZW4gZnJhZ21lbnRzIGFyZSBjcmVhdGVkXG4gIC8vIG9yIG1lcmdlZCB1c2luZyA8alF1ZXJ5LnBhcmFtLmZyYWdtZW50Piwgb3Igd2hlbiB0aGUgZnJhZ21lbnQgaXMgbW9kaWZpZWRcbiAgLy8gdXNpbmcgPGpRdWVyeS5iYnEucHVzaFN0YXRlPi4gVGhpcyBvcHRpb24gb25seSBhcHBsaWVzIHRvIHNlcmlhbGl6ZWQgZGF0YVxuICAvLyBvYmplY3QgZnJhZ21lbnRzLCBhbmQgbm90IHNldC1hcy1zdHJpbmcgZnJhZ21lbnRzLiBEb2VzIG5vdCBhZmZlY3QgdGhlXG4gIC8vIHF1ZXJ5IHN0cmluZy4gRGVmYXVsdHMgdG8gXCIsL1wiIChjb21tYSwgZm9yd2FyZCBzbGFzaCkuXG4gIC8vIFxuICAvLyBOb3RlIHRoYXQgdGhpcyBpcyBjb25zaWRlcmVkIGEgcHVyZWx5IGFlc3RoZXRpYyBvcHRpb24sIGFuZCB3aWxsIGhlbHAgdG9cbiAgLy8gY3JlYXRlIFVSTHMgdGhhdCBcImxvb2sgcHJldHR5XCIgaW4gdGhlIGFkZHJlc3MgYmFyIG9yIGJvb2ttYXJrcywgd2l0aG91dFxuICAvLyBhZmZlY3RpbmcgZnVuY3Rpb25hbGl0eSBpbiBhbnkgd2F5LiBUaGF0IGJlaW5nIHNhaWQsIGJlIGNhcmVmdWwgdG8gbm90XG4gIC8vIHVuZXNjYXBlIGNoYXJhY3RlcnMgdGhhdCBhcmUgdXNlZCBhcyBkZWxpbWl0ZXJzIG9yIHNlcnZlIGEgc3BlY2lhbFxuICAvLyBwdXJwb3NlLCBzdWNoIGFzIHRoZSBcIiM/Jj0rXCIgKG9jdG90aG9ycGUsIHF1ZXN0aW9uIG1hcmssIGFtcGVyc2FuZCxcbiAgLy8gZXF1YWxzLCBwbHVzKSBjaGFyYWN0ZXJzLlxuICAvLyBcbiAgLy8gVXNhZ2U6XG4gIC8vIFxuICAvLyA+IGpRdWVyeS5wYXJhbS5mcmFnbWVudC5ub0VzY2FwZSggWyBjaGFycyBdICk7XG4gIC8vIFxuICAvLyBBcmd1bWVudHM6XG4gIC8vIFxuICAvLyAgY2hhcnMgLSAoU3RyaW5nKSBUaGUgY2hhcmFjdGVycyB0byBub3QgZXNjYXBlIGluIHRoZSBmcmFnbWVudC4gSWZcbiAgLy8gICAgdW5zcGVjaWZpZWQsIGRlZmF1bHRzIHRvIGVtcHR5IHN0cmluZyAoZXNjYXBlIGFsbCBjaGFyYWN0ZXJzKS5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgTm90aGluZy5cbiAgXG4gIGpxX3BhcmFtX2ZyYWdtZW50Lm5vRXNjYXBlID0gZnVuY3Rpb24oIGNoYXJzICkge1xuICAgIGNoYXJzID0gY2hhcnMgfHwgJyc7XG4gICAgdmFyIGFyciA9ICQubWFwKCBjaGFycy5zcGxpdCgnJyksIGVuY29kZVVSSUNvbXBvbmVudCApO1xuICAgIHJlX25vX2VzY2FwZSA9IG5ldyBSZWdFeHAoIGFyci5qb2luKCd8JyksICdnJyApO1xuICB9O1xuICBcbiAgLy8gQSBzZW5zaWJsZSBkZWZhdWx0LiBUaGVzZSBhcmUgdGhlIGNoYXJhY3RlcnMgcGVvcGxlIHNlZW0gdG8gY29tcGxhaW4gYWJvdXRcbiAgLy8gXCJ1Z2xpZnlpbmcgdXAgdGhlIFVSTFwiIHRoZSBtb3N0LlxuICBqcV9wYXJhbV9mcmFnbWVudC5ub0VzY2FwZSggJywvJyApO1xuICBcbiAgLy8gU2VjdGlvbjogRGVwYXJhbSAoZnJvbSBzdHJpbmcpXG4gIC8vIFxuICAvLyBNZXRob2Q6IGpRdWVyeS5kZXBhcmFtXG4gIC8vIFxuICAvLyBEZXNlcmlhbGl6ZSBhIHBhcmFtcyBzdHJpbmcgaW50byBhbiBvYmplY3QsIG9wdGlvbmFsbHkgY29lcmNpbmcgbnVtYmVycyxcbiAgLy8gYm9vbGVhbnMsIG51bGwgYW5kIHVuZGVmaW5lZCB2YWx1ZXM7IHRoaXMgbWV0aG9kIGlzIHRoZSBjb3VudGVycGFydCB0byB0aGVcbiAgLy8gaW50ZXJuYWwgalF1ZXJ5LnBhcmFtIG1ldGhvZC5cbiAgLy8gXG4gIC8vIFVzYWdlOlxuICAvLyBcbiAgLy8gPiBqUXVlcnkuZGVwYXJhbSggcGFyYW1zIFssIGNvZXJjZSBdICk7XG4gIC8vIFxuICAvLyBBcmd1bWVudHM6XG4gIC8vIFxuICAvLyAgcGFyYW1zIC0gKFN0cmluZykgQSBwYXJhbXMgc3RyaW5nIHRvIGJlIHBhcnNlZC5cbiAgLy8gIGNvZXJjZSAtIChCb29sZWFuKSBJZiB0cnVlLCBjb2VyY2VzIGFueSBudW1iZXJzIG9yIHRydWUsIGZhbHNlLCBudWxsLCBhbmRcbiAgLy8gICAgdW5kZWZpbmVkIHRvIHRoZWlyIGFjdHVhbCB2YWx1ZS4gRGVmYXVsdHMgdG8gZmFsc2UgaWYgb21pdHRlZC5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgKE9iamVjdCkgQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgZGVzZXJpYWxpemVkIHBhcmFtcyBzdHJpbmcuXG4gIFxuICAkLmRlcGFyYW0gPSBqcV9kZXBhcmFtID0gZnVuY3Rpb24oIHBhcmFtcywgY29lcmNlICkge1xuICAgIHZhciBvYmogPSB7fSxcbiAgICAgIGNvZXJjZV90eXBlcyA9IHsgJ3RydWUnOiAhMCwgJ2ZhbHNlJzogITEsICdudWxsJzogbnVsbCB9O1xuICAgIFxuICAgIC8vIEl0ZXJhdGUgb3ZlciBhbGwgbmFtZT12YWx1ZSBwYWlycy5cbiAgICAkLmVhY2goIHBhcmFtcy5yZXBsYWNlKCAvXFwrL2csICcgJyApLnNwbGl0KCAnJicgKSwgZnVuY3Rpb24oaix2KXtcbiAgICAgIHZhciBwYXJhbSA9IHYuc3BsaXQoICc9JyApLFxuICAgICAgICBrZXkgPSBkZWNvZGUoIHBhcmFtWzBdICksXG4gICAgICAgIHZhbCxcbiAgICAgICAgY3VyID0gb2JqLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgXG4gICAgICAgIC8vIElmIGtleSBpcyBtb3JlIGNvbXBsZXggdGhhbiAnZm9vJywgbGlrZSAnYVtdJyBvciAnYVtiXVtjXScsIHNwbGl0IGl0XG4gICAgICAgIC8vIGludG8gaXRzIGNvbXBvbmVudCBwYXJ0cy5cbiAgICAgICAga2V5cyA9IGtleS5zcGxpdCggJ11bJyApLFxuICAgICAgICBrZXlzX2xhc3QgPSBrZXlzLmxlbmd0aCAtIDE7XG4gICAgICBcbiAgICAgIC8vIElmIHRoZSBmaXJzdCBrZXlzIHBhcnQgY29udGFpbnMgWyBhbmQgdGhlIGxhc3QgZW5kcyB3aXRoIF0sIHRoZW4gW11cbiAgICAgIC8vIGFyZSBjb3JyZWN0bHkgYmFsYW5jZWQuXG4gICAgICBpZiAoIC9cXFsvLnRlc3QoIGtleXNbMF0gKSAmJiAvXFxdJC8udGVzdCgga2V5c1sga2V5c19sYXN0IF0gKSApIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSB0cmFpbGluZyBdIGZyb20gdGhlIGxhc3Qga2V5cyBwYXJ0LlxuICAgICAgICBrZXlzWyBrZXlzX2xhc3QgXSA9IGtleXNbIGtleXNfbGFzdCBdLnJlcGxhY2UoIC9cXF0kLywgJycgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNwbGl0IGZpcnN0IGtleXMgcGFydCBpbnRvIHR3byBwYXJ0cyBvbiB0aGUgWyBhbmQgYWRkIHRoZW0gYmFjayBvbnRvXG4gICAgICAgIC8vIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGtleXMgYXJyYXkuXG4gICAgICAgIGtleXMgPSBrZXlzLnNoaWZ0KCkuc3BsaXQoJ1snKS5jb25jYXQoIGtleXMgKTtcbiAgICAgICAgXG4gICAgICAgIGtleXNfbGFzdCA9IGtleXMubGVuZ3RoIC0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEJhc2ljICdmb28nIHN0eWxlIGtleS5cbiAgICAgICAga2V5c19sYXN0ID0gMDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQXJlIHdlIGRlYWxpbmcgd2l0aCBhIG5hbWU9dmFsdWUgcGFpciwgb3IganVzdCBhIG5hbWU/XG4gICAgICBpZiAoIHBhcmFtLmxlbmd0aCA9PT0gMiApIHtcbiAgICAgICAgdmFsID0gZGVjb2RlKCBwYXJhbVsxXSApO1xuICAgICAgICBcbiAgICAgICAgLy8gQ29lcmNlIHZhbHVlcy5cbiAgICAgICAgaWYgKCBjb2VyY2UgKSB7XG4gICAgICAgICAgdmFsID0gdmFsICYmICFpc05hTih2YWwpICAgICAgICAgICAgPyArdmFsICAgICAgICAgICAgICAvLyBudW1iZXJcbiAgICAgICAgICAgIDogdmFsID09PSAndW5kZWZpbmVkJyAgICAgICAgICAgICA/IHVuZGVmaW5lZCAgICAgICAgIC8vIHVuZGVmaW5lZFxuICAgICAgICAgICAgOiBjb2VyY2VfdHlwZXNbdmFsXSAhPT0gdW5kZWZpbmVkID8gY29lcmNlX3R5cGVzW3ZhbF0gLy8gdHJ1ZSwgZmFsc2UsIG51bGxcbiAgICAgICAgICAgIDogdmFsOyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0cmluZ1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIGtleXNfbGFzdCApIHtcbiAgICAgICAgICAvLyBDb21wbGV4IGtleSwgYnVpbGQgZGVlcCBvYmplY3Qgc3RydWN0dXJlIGJhc2VkIG9uIGEgZmV3IHJ1bGVzOlxuICAgICAgICAgIC8vICogVGhlICdjdXInIHBvaW50ZXIgc3RhcnRzIGF0IHRoZSBvYmplY3QgdG9wLWxldmVsLlxuICAgICAgICAgIC8vICogW10gPSBhcnJheSBwdXNoIChuIGlzIHNldCB0byBhcnJheSBsZW5ndGgpLCBbbl0gPSBhcnJheSBpZiBuIGlzIFxuICAgICAgICAgIC8vICAgbnVtZXJpYywgb3RoZXJ3aXNlIG9iamVjdC5cbiAgICAgICAgICAvLyAqIElmIGF0IHRoZSBsYXN0IGtleXMgcGFydCwgc2V0IHRoZSB2YWx1ZS5cbiAgICAgICAgICAvLyAqIEZvciBlYWNoIGtleXMgcGFydCwgaWYgdGhlIGN1cnJlbnQgbGV2ZWwgaXMgdW5kZWZpbmVkIGNyZWF0ZSBhblxuICAgICAgICAgIC8vICAgb2JqZWN0IG9yIGFycmF5IGJhc2VkIG9uIHRoZSB0eXBlIG9mIHRoZSBuZXh0IGtleXMgcGFydC5cbiAgICAgICAgICAvLyAqIE1vdmUgdGhlICdjdXInIHBvaW50ZXIgdG8gdGhlIG5leHQgbGV2ZWwuXG4gICAgICAgICAgLy8gKiBSaW5zZSAmIHJlcGVhdC5cbiAgICAgICAgICBmb3IgKCA7IGkgPD0ga2V5c19sYXN0OyBpKysgKSB7XG4gICAgICAgICAgICBrZXkgPSBrZXlzW2ldID09PSAnJyA/IGN1ci5sZW5ndGggOiBrZXlzW2ldO1xuICAgICAgICAgICAgY3VyID0gY3VyW2tleV0gPSBpIDwga2V5c19sYXN0XG4gICAgICAgICAgICAgID8gY3VyW2tleV0gfHwgKCBrZXlzW2krMV0gJiYgaXNOYU4oIGtleXNbaSsxXSApID8ge30gOiBbXSApXG4gICAgICAgICAgICAgIDogdmFsO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTaW1wbGUga2V5LCBldmVuIHNpbXBsZXIgcnVsZXMsIHNpbmNlIG9ubHkgc2NhbGFycyBhbmQgc2hhbGxvd1xuICAgICAgICAgIC8vIGFycmF5cyBhcmUgYWxsb3dlZC5cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoICQuaXNBcnJheSggb2JqW2tleV0gKSApIHtcbiAgICAgICAgICAgIC8vIHZhbCBpcyBhbHJlYWR5IGFuIGFycmF5LCBzbyBwdXNoIG9uIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgICAgICAgb2JqW2tleV0ucHVzaCggdmFsICk7XG4gICAgICAgICAgICBcbiAgICAgICAgICB9IGVsc2UgaWYgKCBvYmpba2V5XSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgICAgLy8gdmFsIGlzbid0IGFuIGFycmF5LCBidXQgc2luY2UgYSBzZWNvbmQgdmFsdWUgaGFzIGJlZW4gc3BlY2lmaWVkLFxuICAgICAgICAgICAgLy8gY29udmVydCB2YWwgaW50byBhbiBhcnJheS5cbiAgICAgICAgICAgIG9ialtrZXldID0gWyBvYmpba2V5XSwgdmFsIF07XG4gICAgICAgICAgICBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gdmFsIGlzIGEgc2NhbGFyLlxuICAgICAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgfSBlbHNlIGlmICgga2V5ICkge1xuICAgICAgICAvLyBObyB2YWx1ZSB3YXMgZGVmaW5lZCwgc28gc2V0IHNvbWV0aGluZyBtZWFuaW5nZnVsLlxuICAgICAgICBvYmpba2V5XSA9IGNvZXJjZVxuICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgOiAnJztcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gb2JqO1xuICB9O1xuICBcbiAgLy8gTWV0aG9kOiBqUXVlcnkuZGVwYXJhbS5xdWVyeXN0cmluZ1xuICAvLyBcbiAgLy8gUGFyc2UgdGhlIHF1ZXJ5IHN0cmluZyBmcm9tIGEgVVJMIG9yIHRoZSBjdXJyZW50IHdpbmRvdy5sb2NhdGlvbixcbiAgLy8gZGVzZXJpYWxpemluZyBpdCBpbnRvIGFuIG9iamVjdCwgb3B0aW9uYWxseSBjb2VyY2luZyBudW1iZXJzLCBib29sZWFucyxcbiAgLy8gbnVsbCBhbmQgdW5kZWZpbmVkIHZhbHVlcy5cbiAgLy8gXG4gIC8vIFVzYWdlOlxuICAvLyBcbiAgLy8gPiBqUXVlcnkuZGVwYXJhbS5xdWVyeXN0cmluZyggWyB1cmwgXSBbLCBjb2VyY2UgXSApO1xuICAvLyBcbiAgLy8gQXJndW1lbnRzOlxuICAvLyBcbiAgLy8gIHVybCAtIChTdHJpbmcpIEFuIG9wdGlvbmFsIHBhcmFtcyBzdHJpbmcgb3IgVVJMIGNvbnRhaW5pbmcgcXVlcnkgc3RyaW5nXG4gIC8vICAgIHBhcmFtcyB0byBiZSBwYXJzZWQuIElmIHVybCBpcyBvbWl0dGVkLCB0aGUgY3VycmVudCB3aW5kb3cubG9jYXRpb25cbiAgLy8gICAgaXMgdXNlZC5cbiAgLy8gIGNvZXJjZSAtIChCb29sZWFuKSBJZiB0cnVlLCBjb2VyY2VzIGFueSBudW1iZXJzIG9yIHRydWUsIGZhbHNlLCBudWxsLCBhbmRcbiAgLy8gICAgdW5kZWZpbmVkIHRvIHRoZWlyIGFjdHVhbCB2YWx1ZS4gRGVmYXVsdHMgdG8gZmFsc2UgaWYgb21pdHRlZC5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgKE9iamVjdCkgQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgZGVzZXJpYWxpemVkIHBhcmFtcyBzdHJpbmcuXG4gIFxuICAvLyBNZXRob2Q6IGpRdWVyeS5kZXBhcmFtLmZyYWdtZW50XG4gIC8vIFxuICAvLyBQYXJzZSB0aGUgZnJhZ21lbnQgKGhhc2gpIGZyb20gYSBVUkwgb3IgdGhlIGN1cnJlbnQgd2luZG93LmxvY2F0aW9uLFxuICAvLyBkZXNlcmlhbGl6aW5nIGl0IGludG8gYW4gb2JqZWN0LCBvcHRpb25hbGx5IGNvZXJjaW5nIG51bWJlcnMsIGJvb2xlYW5zLFxuICAvLyBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzLlxuICAvLyBcbiAgLy8gVXNhZ2U6XG4gIC8vIFxuICAvLyA+IGpRdWVyeS5kZXBhcmFtLmZyYWdtZW50KCBbIHVybCBdIFssIGNvZXJjZSBdICk7XG4gIC8vIFxuICAvLyBBcmd1bWVudHM6XG4gIC8vIFxuICAvLyAgdXJsIC0gKFN0cmluZykgQW4gb3B0aW9uYWwgcGFyYW1zIHN0cmluZyBvciBVUkwgY29udGFpbmluZyBmcmFnbWVudCAoaGFzaClcbiAgLy8gICAgcGFyYW1zIHRvIGJlIHBhcnNlZC4gSWYgdXJsIGlzIG9taXR0ZWQsIHRoZSBjdXJyZW50IHdpbmRvdy5sb2NhdGlvblxuICAvLyAgICBpcyB1c2VkLlxuICAvLyAgY29lcmNlIC0gKEJvb2xlYW4pIElmIHRydWUsIGNvZXJjZXMgYW55IG51bWJlcnMgb3IgdHJ1ZSwgZmFsc2UsIG51bGwsIGFuZFxuICAvLyAgICB1bmRlZmluZWQgdG8gdGhlaXIgYWN0dWFsIHZhbHVlLiBEZWZhdWx0cyB0byBmYWxzZSBpZiBvbWl0dGVkLlxuICAvLyBcbiAgLy8gUmV0dXJuczpcbiAgLy8gXG4gIC8vICAoT2JqZWN0KSBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBkZXNlcmlhbGl6ZWQgcGFyYW1zIHN0cmluZy5cbiAgXG4gIGZ1bmN0aW9uIGpxX2RlcGFyYW1fc3ViKCBpc19mcmFnbWVudCwgdXJsX29yX3BhcmFtcywgY29lcmNlICkge1xuICAgIGlmICggdXJsX29yX3BhcmFtcyA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiB1cmxfb3JfcGFyYW1zID09PSAnYm9vbGVhbicgKSB7XG4gICAgICAvLyB1cmxfb3JfcGFyYW1zIG5vdCBzcGVjaWZpZWQuXG4gICAgICBjb2VyY2UgPSB1cmxfb3JfcGFyYW1zO1xuICAgICAgdXJsX29yX3BhcmFtcyA9IGpxX3BhcmFtWyBpc19mcmFnbWVudCA/IHN0cl9mcmFnbWVudCA6IHN0cl9xdWVyeXN0cmluZyBdKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHVybF9vcl9wYXJhbXMgPSBpc19zdHJpbmcoIHVybF9vcl9wYXJhbXMgKVxuICAgICAgICA/IHVybF9vcl9wYXJhbXMucmVwbGFjZSggaXNfZnJhZ21lbnQgPyByZV90cmltX2ZyYWdtZW50IDogcmVfdHJpbV9xdWVyeXN0cmluZywgJycgKVxuICAgICAgICA6IHVybF9vcl9wYXJhbXM7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiBqcV9kZXBhcmFtKCB1cmxfb3JfcGFyYW1zLCBjb2VyY2UgKTtcbiAgfTtcbiAgXG4gIGpxX2RlcGFyYW1bIHN0cl9xdWVyeXN0cmluZyBdICAgICAgICAgICAgICAgICAgICA9IGN1cnJ5KCBqcV9kZXBhcmFtX3N1YiwgMCApO1xuICBqcV9kZXBhcmFtWyBzdHJfZnJhZ21lbnQgXSA9IGpxX2RlcGFyYW1fZnJhZ21lbnQgPSBjdXJyeSgganFfZGVwYXJhbV9zdWIsIDEgKTtcbiAgXG4gIC8vIFNlY3Rpb246IEVsZW1lbnQgbWFuaXB1bGF0aW9uXG4gIC8vIFxuICAvLyBNZXRob2Q6IGpRdWVyeS5lbGVtVXJsQXR0clxuICAvLyBcbiAgLy8gR2V0IHRoZSBpbnRlcm5hbCBcIkRlZmF1bHQgVVJMIGF0dHJpYnV0ZSBwZXIgdGFnXCIgbGlzdCwgb3IgYXVnbWVudCB0aGUgbGlzdFxuICAvLyB3aXRoIGFkZGl0aW9uYWwgdGFnLWF0dHJpYnV0ZSBwYWlycywgaW4gY2FzZSB0aGUgZGVmYXVsdHMgYXJlIGluc3VmZmljaWVudC5cbiAgLy8gXG4gIC8vIEluIHRoZSA8alF1ZXJ5LmZuLnF1ZXJ5c3RyaW5nPiBhbmQgPGpRdWVyeS5mbi5mcmFnbWVudD4gbWV0aG9kcywgdGhpcyBsaXN0XG4gIC8vIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIGF0dHJpYnV0ZSBjb250YWlucyB0aGUgVVJMIHRvIGJlIG1vZGlmaWVkLCBpZlxuICAvLyBhbiBcImF0dHJcIiBwYXJhbSBpcyBub3Qgc3BlY2lmaWVkLlxuICAvLyBcbiAgLy8gRGVmYXVsdCBUYWctQXR0cmlidXRlIExpc3Q6XG4gIC8vIFxuICAvLyAgYSAgICAgIC0gaHJlZlxuICAvLyAgYmFzZSAgIC0gaHJlZlxuICAvLyAgaWZyYW1lIC0gc3JjXG4gIC8vICBpbWcgICAgLSBzcmNcbiAgLy8gIGlucHV0ICAtIHNyY1xuICAvLyAgZm9ybSAgIC0gYWN0aW9uXG4gIC8vICBsaW5rICAgLSBocmVmXG4gIC8vICBzY3JpcHQgLSBzcmNcbiAgLy8gXG4gIC8vIFVzYWdlOlxuICAvLyBcbiAgLy8gPiBqUXVlcnkuZWxlbVVybEF0dHIoIFsgdGFnX2F0dHIgXSApO1xuICAvLyBcbiAgLy8gQXJndW1lbnRzOlxuICAvLyBcbiAgLy8gIHRhZ19hdHRyIC0gKE9iamVjdCkgQW4gb2JqZWN0IGNvbnRhaW5pbmcgYSBsaXN0IG9mIHRhZyBuYW1lcyBhbmQgdGhlaXJcbiAgLy8gICAgYXNzb2NpYXRlZCBkZWZhdWx0IGF0dHJpYnV0ZSBuYW1lcyBpbiB0aGUgZm9ybWF0IHsgdGFnOiAnYXR0cicsIC4uLiB9IHRvXG4gIC8vICAgIGJlIG1lcmdlZCBpbnRvIHRoZSBpbnRlcm5hbCB0YWctYXR0cmlidXRlIGxpc3QuXG4gIC8vIFxuICAvLyBSZXR1cm5zOlxuICAvLyBcbiAgLy8gIChPYmplY3QpIEFuIG9iamVjdCBjb250YWluaW5nIGFsbCBzdG9yZWQgdGFnLWF0dHJpYnV0ZSB2YWx1ZXMuXG4gIFxuICAvLyBPbmx5IGRlZmluZSBmdW5jdGlvbiBhbmQgc2V0IGRlZmF1bHRzIGlmIGZ1bmN0aW9uIGRvZXNuJ3QgYWxyZWFkeSBleGlzdCwgYXNcbiAgLy8gdGhlIHVybEludGVybmFsIHBsdWdpbiB3aWxsIHByb3ZpZGUgdGhpcyBtZXRob2QgYXMgd2VsbC5cbiAgJFsgc3RyX2VsZW1VcmxBdHRyIF0gfHwgKCRbIHN0cl9lbGVtVXJsQXR0ciBdID0gZnVuY3Rpb24oIG9iaiApIHtcbiAgICByZXR1cm4gJC5leHRlbmQoIGVsZW1VcmxBdHRyX2NhY2hlLCBvYmogKTtcbiAgfSkoe1xuICAgIGE6IHN0cl9ocmVmLFxuICAgIGJhc2U6IHN0cl9ocmVmLFxuICAgIGlmcmFtZTogc3RyX3NyYyxcbiAgICBpbWc6IHN0cl9zcmMsXG4gICAgaW5wdXQ6IHN0cl9zcmMsXG4gICAgZm9ybTogJ2FjdGlvbicsXG4gICAgbGluazogc3RyX2hyZWYsXG4gICAgc2NyaXB0OiBzdHJfc3JjXG4gIH0pO1xuICBcbiAganFfZWxlbVVybEF0dHIgPSAkWyBzdHJfZWxlbVVybEF0dHIgXTtcbiAgXG4gIC8vIE1ldGhvZDogalF1ZXJ5LmZuLnF1ZXJ5c3RyaW5nXG4gIC8vIFxuICAvLyBVcGRhdGUgVVJMIGF0dHJpYnV0ZSBpbiBvbmUgb3IgbW9yZSBlbGVtZW50cywgbWVyZ2luZyB0aGUgY3VycmVudCBVUkwgKHdpdGhcbiAgLy8gb3Igd2l0aG91dCBwcmUtZXhpc3RpbmcgcXVlcnkgc3RyaW5nIHBhcmFtcykgcGx1cyBhbnkgcGFyYW1zIG9iamVjdCBvclxuICAvLyBzdHJpbmcgaW50byBhIG5ldyBVUkwsIHdoaWNoIGlzIHRoZW4gc2V0IGludG8gdGhhdCBhdHRyaWJ1dGUuIExpa2VcbiAgLy8gPGpRdWVyeS5wYXJhbS5xdWVyeXN0cmluZyAoYnVpbGQgdXJsKT4sIGJ1dCBmb3IgYWxsIGVsZW1lbnRzIGluIGEgalF1ZXJ5XG4gIC8vIGNvbGxlY3Rpb24uXG4gIC8vIFxuICAvLyBVc2FnZTpcbiAgLy8gXG4gIC8vID4galF1ZXJ5KCdzZWxlY3RvcicpLnF1ZXJ5c3RyaW5nKCBbIGF0dHIsIF0gcGFyYW1zIFssIG1lcmdlX21vZGUgXSApO1xuICAvLyBcbiAgLy8gQXJndW1lbnRzOlxuICAvLyBcbiAgLy8gIGF0dHIgLSAoU3RyaW5nKSBPcHRpb25hbCBuYW1lIG9mIGFuIGF0dHJpYnV0ZSB0aGF0IHdpbGwgY29udGFpbiBhIFVSTCB0b1xuICAvLyAgICBtZXJnZSBwYXJhbXMgb3IgdXJsIGludG8uIFNlZSA8alF1ZXJ5LmVsZW1VcmxBdHRyPiBmb3IgYSBsaXN0IG9mIGRlZmF1bHRcbiAgLy8gICAgYXR0cmlidXRlcy5cbiAgLy8gIHBhcmFtcyAtIChPYmplY3QpIEEgcGFyYW1zIG9iamVjdCB0byBiZSBtZXJnZWQgaW50byB0aGUgVVJMIGF0dHJpYnV0ZS5cbiAgLy8gIHBhcmFtcyAtIChTdHJpbmcpIEEgVVJMIGNvbnRhaW5pbmcgcXVlcnkgc3RyaW5nIHBhcmFtcywgb3IgcGFyYW1zIHN0cmluZ1xuICAvLyAgICB0byBiZSBtZXJnZWQgaW50byB0aGUgVVJMIGF0dHJpYnV0ZS5cbiAgLy8gIG1lcmdlX21vZGUgLSAoTnVtYmVyKSBNZXJnZSBiZWhhdmlvciBkZWZhdWx0cyB0byAwIGlmIG1lcmdlX21vZGUgaXMgbm90XG4gIC8vICAgIHNwZWNpZmllZCwgYW5kIGlzIGFzLWZvbGxvd3M6XG4gIC8vICAgIFxuICAvLyAgICAqIDA6IHBhcmFtcyBpbiB0aGUgcGFyYW1zIGFyZ3VtZW50IHdpbGwgb3ZlcnJpZGUgYW55IHBhcmFtcyBpbiBhdHRyIFVSTC5cbiAgLy8gICAgKiAxOiBhbnkgcGFyYW1zIGluIGF0dHIgVVJMIHdpbGwgb3ZlcnJpZGUgcGFyYW1zIGluIHRoZSBwYXJhbXMgYXJndW1lbnQuXG4gIC8vICAgICogMjogcGFyYW1zIGFyZ3VtZW50IHdpbGwgY29tcGxldGVseSByZXBsYWNlIGFueSBxdWVyeSBzdHJpbmcgaW4gYXR0clxuICAvLyAgICAgICAgIFVSTC5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgKGpRdWVyeSkgVGhlIGluaXRpYWwgalF1ZXJ5IGNvbGxlY3Rpb24gb2YgZWxlbWVudHMsIGJ1dCB3aXRoIG1vZGlmaWVkIFVSTFxuICAvLyAgYXR0cmlidXRlIHZhbHVlcy5cbiAgXG4gIC8vIE1ldGhvZDogalF1ZXJ5LmZuLmZyYWdtZW50XG4gIC8vIFxuICAvLyBVcGRhdGUgVVJMIGF0dHJpYnV0ZSBpbiBvbmUgb3IgbW9yZSBlbGVtZW50cywgbWVyZ2luZyB0aGUgY3VycmVudCBVUkwgKHdpdGhcbiAgLy8gb3Igd2l0aG91dCBwcmUtZXhpc3RpbmcgZnJhZ21lbnQvaGFzaCBwYXJhbXMpIHBsdXMgYW55IHBhcmFtcyBvYmplY3Qgb3JcbiAgLy8gc3RyaW5nIGludG8gYSBuZXcgVVJMLCB3aGljaCBpcyB0aGVuIHNldCBpbnRvIHRoYXQgYXR0cmlidXRlLiBMaWtlXG4gIC8vIDxqUXVlcnkucGFyYW0uZnJhZ21lbnQgKGJ1aWxkIHVybCk+LCBidXQgZm9yIGFsbCBlbGVtZW50cyBpbiBhIGpRdWVyeVxuICAvLyBjb2xsZWN0aW9uLlxuICAvLyBcbiAgLy8gVXNhZ2U6XG4gIC8vIFxuICAvLyA+IGpRdWVyeSgnc2VsZWN0b3InKS5mcmFnbWVudCggWyBhdHRyLCBdIHBhcmFtcyBbLCBtZXJnZV9tb2RlIF0gKTtcbiAgLy8gXG4gIC8vIEFyZ3VtZW50czpcbiAgLy8gXG4gIC8vICBhdHRyIC0gKFN0cmluZykgT3B0aW9uYWwgbmFtZSBvZiBhbiBhdHRyaWJ1dGUgdGhhdCB3aWxsIGNvbnRhaW4gYSBVUkwgdG9cbiAgLy8gICAgbWVyZ2UgcGFyYW1zIGludG8uIFNlZSA8alF1ZXJ5LmVsZW1VcmxBdHRyPiBmb3IgYSBsaXN0IG9mIGRlZmF1bHRcbiAgLy8gICAgYXR0cmlidXRlcy5cbiAgLy8gIHBhcmFtcyAtIChPYmplY3QpIEEgcGFyYW1zIG9iamVjdCB0byBiZSBtZXJnZWQgaW50byB0aGUgVVJMIGF0dHJpYnV0ZS5cbiAgLy8gIHBhcmFtcyAtIChTdHJpbmcpIEEgVVJMIGNvbnRhaW5pbmcgZnJhZ21lbnQgKGhhc2gpIHBhcmFtcywgb3IgcGFyYW1zXG4gIC8vICAgIHN0cmluZyB0byBiZSBtZXJnZWQgaW50byB0aGUgVVJMIGF0dHJpYnV0ZS5cbiAgLy8gIG1lcmdlX21vZGUgLSAoTnVtYmVyKSBNZXJnZSBiZWhhdmlvciBkZWZhdWx0cyB0byAwIGlmIG1lcmdlX21vZGUgaXMgbm90XG4gIC8vICAgIHNwZWNpZmllZCwgYW5kIGlzIGFzLWZvbGxvd3M6XG4gIC8vICAgIFxuICAvLyAgICAqIDA6IHBhcmFtcyBpbiB0aGUgcGFyYW1zIGFyZ3VtZW50IHdpbGwgb3ZlcnJpZGUgYW55IHBhcmFtcyBpbiBhdHRyIFVSTC5cbiAgLy8gICAgKiAxOiBhbnkgcGFyYW1zIGluIGF0dHIgVVJMIHdpbGwgb3ZlcnJpZGUgcGFyYW1zIGluIHRoZSBwYXJhbXMgYXJndW1lbnQuXG4gIC8vICAgICogMjogcGFyYW1zIGFyZ3VtZW50IHdpbGwgY29tcGxldGVseSByZXBsYWNlIGFueSBmcmFnbWVudCAoaGFzaCkgaW4gYXR0clxuICAvLyAgICAgICAgIFVSTC5cbiAgLy8gXG4gIC8vIFJldHVybnM6XG4gIC8vIFxuICAvLyAgKGpRdWVyeSkgVGhlIGluaXRpYWwgalF1ZXJ5IGNvbGxlY3Rpb24gb2YgZWxlbWVudHMsIGJ1dCB3aXRoIG1vZGlmaWVkIFVSTFxuICAvLyAgYXR0cmlidXRlIHZhbHVlcy5cbiAgXG4gIGZ1bmN0aW9uIGpxX2ZuX3N1YiggbW9kZSwgZm9yY2VfYXR0ciwgcGFyYW1zLCBtZXJnZV9tb2RlICkge1xuICAgIGlmICggIWlzX3N0cmluZyggcGFyYW1zICkgJiYgdHlwZW9mIHBhcmFtcyAhPT0gJ29iamVjdCcgKSB7XG4gICAgICAvLyBmb3JjZV9hdHRyIG5vdCBzcGVjaWZpZWQuXG4gICAgICBtZXJnZV9tb2RlID0gcGFyYW1zO1xuICAgICAgcGFyYW1zID0gZm9yY2VfYXR0cjtcbiAgICAgIGZvcmNlX2F0dHIgPSB1bmRlZmluZWQ7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgIHZhciB0aGF0ID0gJCh0aGlzKSxcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBhdHRyaWJ1dGUgc3BlY2lmaWVkLCBvciBkZWZhdWx0IHNwZWNpZmllZCB2aWEgJC5lbGVtVXJsQXR0ci5cbiAgICAgICAgYXR0ciA9IGZvcmNlX2F0dHIgfHwganFfZWxlbVVybEF0dHIoKVsgKCB0aGlzLm5vZGVOYW1lIHx8ICcnICkudG9Mb3dlckNhc2UoKSBdIHx8ICcnLFxuICAgICAgICBcbiAgICAgICAgLy8gR2V0IFVSTCB2YWx1ZS5cbiAgICAgICAgdXJsID0gYXR0ciAmJiB0aGF0LmF0dHIoIGF0dHIgKSB8fCAnJztcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGF0dHJpYnV0ZSB3aXRoIG5ldyBVUkwuXG4gICAgICB0aGF0LmF0dHIoIGF0dHIsIGpxX3BhcmFtWyBtb2RlIF0oIHVybCwgcGFyYW1zLCBtZXJnZV9tb2RlICkgKTtcbiAgICB9KTtcbiAgICBcbiAgfTtcbiAgXG4gICQuZm5bIHN0cl9xdWVyeXN0cmluZyBdID0gY3VycnkoIGpxX2ZuX3N1Yiwgc3RyX3F1ZXJ5c3RyaW5nICk7XG4gICQuZm5bIHN0cl9mcmFnbWVudCBdICAgID0gY3VycnkoIGpxX2ZuX3N1Yiwgc3RyX2ZyYWdtZW50ICk7XG4gIFxuICAvLyBTZWN0aW9uOiBIaXN0b3J5LCBoYXNoY2hhbmdlIGV2ZW50XG4gIC8vIFxuICAvLyBNZXRob2Q6IGpRdWVyeS5iYnEucHVzaFN0YXRlXG4gIC8vIFxuICAvLyBBZGRzIGEgJ3N0YXRlJyBpbnRvIHRoZSBicm93c2VyIGhpc3RvcnkgYXQgdGhlIGN1cnJlbnQgcG9zaXRpb24sIHNldHRpbmdcbiAgLy8gbG9jYXRpb24uaGFzaCBhbmQgdHJpZ2dlcmluZyBhbnkgYm91bmQgPGhhc2hjaGFuZ2UgZXZlbnQ+IGNhbGxiYWNrc1xuICAvLyAocHJvdmlkZWQgdGhlIG5ldyBzdGF0ZSBpcyBkaWZmZXJlbnQgdGhhbiB0aGUgcHJldmlvdXMgc3RhdGUpLlxuICAvLyBcbiAgLy8gSWYgbm8gYXJndW1lbnRzIGFyZSBwYXNzZWQsIGFuIGVtcHR5IHN0YXRlIGlzIGNyZWF0ZWQsIHdoaWNoIGlzIGp1c3QgYVxuICAvLyBzaG9ydGN1dCBmb3IgalF1ZXJ5LmJicS5wdXNoU3RhdGUoIHt9LCAyICkuXG4gIC8vIFxuICAvLyBVc2FnZTpcbiAgLy8gXG4gIC8vID4galF1ZXJ5LmJicS5wdXNoU3RhdGUoIFsgcGFyYW1zIFssIG1lcmdlX21vZGUgXSBdICk7XG4gIC8vIFxuICAvLyBBcmd1bWVudHM6XG4gIC8vIFxuICAvLyAgcGFyYW1zIC0gKFN0cmluZykgQSBzZXJpYWxpemVkIHBhcmFtcyBzdHJpbmcgb3IgYSBoYXNoIHN0cmluZyBiZWdpbm5pbmdcbiAgLy8gICAgd2l0aCAjIHRvIG1lcmdlIGludG8gbG9jYXRpb24uaGFzaC5cbiAgLy8gIHBhcmFtcyAtIChPYmplY3QpIEEgcGFyYW1zIG9iamVjdCB0byBtZXJnZSBpbnRvIGxvY2F0aW9uLmhhc2guXG4gIC8vICBtZXJnZV9tb2RlIC0gKE51bWJlcikgTWVyZ2UgYmVoYXZpb3IgZGVmYXVsdHMgdG8gMCBpZiBtZXJnZV9tb2RlIGlzIG5vdFxuICAvLyAgICBzcGVjaWZpZWQgKHVubGVzcyBhIGhhc2ggc3RyaW5nIGJlZ2lubmluZyB3aXRoICMgaXMgc3BlY2lmaWVkLCBpbiB3aGljaFxuICAvLyAgICBjYXNlIG1lcmdlIGJlaGF2aW9yIGRlZmF1bHRzIHRvIDIpLCBhbmQgaXMgYXMtZm9sbG93czpcbiAgLy8gXG4gIC8vICAgICogMDogcGFyYW1zIGluIHRoZSBwYXJhbXMgYXJndW1lbnQgd2lsbCBvdmVycmlkZSBhbnkgcGFyYW1zIGluIHRoZVxuICAvLyAgICAgICAgIGN1cnJlbnQgc3RhdGUuXG4gIC8vICAgICogMTogYW55IHBhcmFtcyBpbiB0aGUgY3VycmVudCBzdGF0ZSB3aWxsIG92ZXJyaWRlIHBhcmFtcyBpbiB0aGUgcGFyYW1zXG4gIC8vICAgICAgICAgYXJndW1lbnQuXG4gIC8vICAgICogMjogcGFyYW1zIGFyZ3VtZW50IHdpbGwgY29tcGxldGVseSByZXBsYWNlIGN1cnJlbnQgc3RhdGUuXG4gIC8vIFxuICAvLyBSZXR1cm5zOlxuICAvLyBcbiAgLy8gIE5vdGhpbmcuXG4gIC8vIFxuICAvLyBBZGRpdGlvbmFsIE5vdGVzOlxuICAvLyBcbiAgLy8gICogU2V0dGluZyBhbiBlbXB0eSBzdGF0ZSBtYXkgY2F1c2UgdGhlIGJyb3dzZXIgdG8gc2Nyb2xsLlxuICAvLyAgKiBVbmxpa2UgdGhlIGZyYWdtZW50IGFuZCBxdWVyeXN0cmluZyBtZXRob2RzLCBpZiBhIGhhc2ggc3RyaW5nIGJlZ2lubmluZ1xuICAvLyAgICB3aXRoICMgaXMgc3BlY2lmaWVkIGFzIHRoZSBwYXJhbXMgYWdydW1lbnQsIG1lcmdlX21vZGUgZGVmYXVsdHMgdG8gMi5cbiAgXG4gIGpxX2JicS5wdXNoU3RhdGUgPSBqcV9iYnFfcHVzaFN0YXRlID0gZnVuY3Rpb24oIHBhcmFtcywgbWVyZ2VfbW9kZSApIHtcbiAgICBpZiAoIGlzX3N0cmluZyggcGFyYW1zICkgJiYgL14jLy50ZXN0KCBwYXJhbXMgKSAmJiBtZXJnZV9tb2RlID09PSB1bmRlZmluZWQgKSB7XG4gICAgICAvLyBQYXJhbXMgc3RyaW5nIGJlZ2lucyB3aXRoICMgYW5kIG1lcmdlX21vZGUgbm90IHNwZWNpZmllZCwgc28gY29tcGxldGVseVxuICAgICAgLy8gb3ZlcndyaXRlIHdpbmRvdy5sb2NhdGlvbi5oYXNoLlxuICAgICAgbWVyZ2VfbW9kZSA9IDI7XG4gICAgfVxuICAgIFxuICAgIHZhciBoYXNfYXJncyA9IHBhcmFtcyAhPT0gdW5kZWZpbmVkLFxuICAgICAgLy8gTWVyZ2UgcGFyYW1zIGludG8gd2luZG93LmxvY2F0aW9uIHVzaW5nICQucGFyYW0uZnJhZ21lbnQuXG4gICAgICB1cmwgPSBqcV9wYXJhbV9mcmFnbWVudCggd2luZG93WyBzdHJfbG9jYXRpb24gXVsgc3RyX2hyZWYgXSxcbiAgICAgICAgaGFzX2FyZ3MgPyBwYXJhbXMgOiB7fSwgaGFzX2FyZ3MgPyBtZXJnZV9tb2RlIDogMiApO1xuICAgIFxuICAgIC8vIFNldCBuZXcgd2luZG93LmxvY2F0aW9uLmhyZWYuIElmIGhhc2ggaXMgZW1wdHksIHVzZSBqdXN0ICMgdG8gcHJldmVudFxuICAgIC8vIGJyb3dzZXIgZnJvbSByZWxvYWRpbmcgdGhlIHBhZ2UuIE5vdGUgdGhhdCBTYWZhcmkgMyAmIENocm9tZSBiYXJmIG9uXG4gICAgLy8gbG9jYXRpb24uaGFzaCA9ICcjJy5cbiAgICB3aW5kb3dbIHN0cl9sb2NhdGlvbiBdWyBzdHJfaHJlZiBdID0gdXJsICsgKCAvIy8udGVzdCggdXJsICkgPyAnJyA6ICcjJyApO1xuICB9O1xuICBcbiAgLy8gTWV0aG9kOiBqUXVlcnkuYmJxLmdldFN0YXRlXG4gIC8vIFxuICAvLyBSZXRyaWV2ZXMgdGhlIGN1cnJlbnQgJ3N0YXRlJyBmcm9tIHRoZSBicm93c2VyIGhpc3RvcnksIHBhcnNpbmdcbiAgLy8gbG9jYXRpb24uaGFzaCBmb3IgYSBzcGVjaWZpYyBrZXkgb3IgcmV0dXJuaW5nIGFuIG9iamVjdCBjb250YWluaW5nIHRoZVxuICAvLyBlbnRpcmUgc3RhdGUsIG9wdGlvbmFsbHkgY29lcmNpbmcgbnVtYmVycywgYm9vbGVhbnMsIG51bGwgYW5kIHVuZGVmaW5lZFxuICAvLyB2YWx1ZXMuXG4gIC8vIFxuICAvLyBVc2FnZTpcbiAgLy8gXG4gIC8vID4galF1ZXJ5LmJicS5nZXRTdGF0ZSggWyBrZXkgXSBbLCBjb2VyY2UgXSApO1xuICAvLyBcbiAgLy8gQXJndW1lbnRzOlxuICAvLyBcbiAgLy8gIGtleSAtIChTdHJpbmcpIEFuIG9wdGlvbmFsIHN0YXRlIGtleSBmb3Igd2hpY2ggdG8gcmV0dXJuIGEgdmFsdWUuXG4gIC8vICBjb2VyY2UgLSAoQm9vbGVhbikgSWYgdHJ1ZSwgY29lcmNlcyBhbnkgbnVtYmVycyBvciB0cnVlLCBmYWxzZSwgbnVsbCwgYW5kXG4gIC8vICAgIHVuZGVmaW5lZCB0byB0aGVpciBhY3R1YWwgdmFsdWUuIERlZmF1bHRzIHRvIGZhbHNlLlxuICAvLyBcbiAgLy8gUmV0dXJuczpcbiAgLy8gXG4gIC8vICAoQW55dGhpbmcpIElmIGtleSBpcyBwYXNzZWQsIHJldHVybnMgdGhlIHZhbHVlIGNvcnJlc3BvbmRpbmcgd2l0aCB0aGF0IGtleVxuICAvLyAgICBpbiB0aGUgbG9jYXRpb24uaGFzaCAnc3RhdGUnLCBvciB1bmRlZmluZWQuIElmIG5vdCwgYW4gb2JqZWN0XG4gIC8vICAgIHJlcHJlc2VudGluZyB0aGUgZW50aXJlICdzdGF0ZScgaXMgcmV0dXJuZWQuXG4gIFxuICBqcV9iYnEuZ2V0U3RhdGUgPSBqcV9iYnFfZ2V0U3RhdGUgPSBmdW5jdGlvbigga2V5LCBjb2VyY2UgKSB7XG4gICAgcmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkIHx8IHR5cGVvZiBrZXkgPT09ICdib29sZWFuJ1xuICAgICAgPyBqcV9kZXBhcmFtX2ZyYWdtZW50KCBrZXkgKSAvLyAna2V5JyByZWFsbHkgbWVhbnMgJ2NvZXJjZScgaGVyZVxuICAgICAgOiBqcV9kZXBhcmFtX2ZyYWdtZW50KCBjb2VyY2UgKVsga2V5IF07XG4gIH07XG4gIFxuICAvLyBNZXRob2Q6IGpRdWVyeS5iYnEucmVtb3ZlU3RhdGVcbiAgLy8gXG4gIC8vIFJlbW92ZSBvbmUgb3IgbW9yZSBrZXlzIGZyb20gdGhlIGN1cnJlbnQgYnJvd3NlciBoaXN0b3J5ICdzdGF0ZScsIGNyZWF0aW5nXG4gIC8vIGEgbmV3IHN0YXRlLCBzZXR0aW5nIGxvY2F0aW9uLmhhc2ggYW5kIHRyaWdnZXJpbmcgYW55IGJvdW5kXG4gIC8vIDxoYXNoY2hhbmdlIGV2ZW50PiBjYWxsYmFja3MgKHByb3ZpZGVkIHRoZSBuZXcgc3RhdGUgaXMgZGlmZmVyZW50IHRoYW5cbiAgLy8gdGhlIHByZXZpb3VzIHN0YXRlKS5cbiAgLy8gXG4gIC8vIElmIG5vIGFyZ3VtZW50cyBhcmUgcGFzc2VkLCBhbiBlbXB0eSBzdGF0ZSBpcyBjcmVhdGVkLCB3aGljaCBpcyBqdXN0IGFcbiAgLy8gc2hvcnRjdXQgZm9yIGpRdWVyeS5iYnEucHVzaFN0YXRlKCB7fSwgMiApLlxuICAvLyBcbiAgLy8gVXNhZ2U6XG4gIC8vIFxuICAvLyA+IGpRdWVyeS5iYnEucmVtb3ZlU3RhdGUoIFsga2V5IFssIGtleSAuLi4gXSBdICk7XG4gIC8vIFxuICAvLyBBcmd1bWVudHM6XG4gIC8vIFxuICAvLyAga2V5IC0gKFN0cmluZykgT25lIG9yIG1vcmUga2V5IHZhbHVlcyB0byByZW1vdmUgZnJvbSB0aGUgY3VycmVudCBzdGF0ZSxcbiAgLy8gICAgcGFzc2VkIGFzIGluZGl2aWR1YWwgYXJndW1lbnRzLlxuICAvLyAga2V5IC0gKEFycmF5KSBBIHNpbmdsZSBhcnJheSBhcmd1bWVudCB0aGF0IGNvbnRhaW5zIGEgbGlzdCBvZiBrZXkgdmFsdWVzXG4gIC8vICAgIHRvIHJlbW92ZSBmcm9tIHRoZSBjdXJyZW50IHN0YXRlLlxuICAvLyBcbiAgLy8gUmV0dXJuczpcbiAgLy8gXG4gIC8vICBOb3RoaW5nLlxuICAvLyBcbiAgLy8gQWRkaXRpb25hbCBOb3RlczpcbiAgLy8gXG4gIC8vICAqIFNldHRpbmcgYW4gZW1wdHkgc3RhdGUgbWF5IGNhdXNlIHRoZSBicm93c2VyIHRvIHNjcm9sbC5cbiAgXG4gIGpxX2JicS5yZW1vdmVTdGF0ZSA9IGZ1bmN0aW9uKCBhcnIgKSB7XG4gICAgdmFyIHN0YXRlID0ge307XG4gICAgXG4gICAgLy8gSWYgb25lIG9yIG1vcmUgYXJndW1lbnRzIGlzIHBhc3NlZC4uXG4gICAgaWYgKCBhcnIgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgIFxuICAgICAgLy8gR2V0IHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAgc3RhdGUgPSBqcV9iYnFfZ2V0U3RhdGUoKTtcbiAgICAgIFxuICAgICAgLy8gRm9yIGVhY2ggcGFzc2VkIGtleSwgZGVsZXRlIHRoZSBjb3JyZXNwb25kaW5nIHByb3BlcnR5IGZyb20gdGhlIGN1cnJlbnRcbiAgICAgIC8vIHN0YXRlLlxuICAgICAgJC5lYWNoKCAkLmlzQXJyYXkoIGFyciApID8gYXJyIDogYXJndW1lbnRzLCBmdW5jdGlvbihpLHYpe1xuICAgICAgICBkZWxldGUgc3RhdGVbIHYgXTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBTZXQgdGhlIHN0YXRlLCBjb21wbGV0ZWx5IG92ZXJyaWRpbmcgYW55IGV4aXN0aW5nIHN0YXRlLlxuICAgIGpxX2JicV9wdXNoU3RhdGUoIHN0YXRlLCAyICk7XG4gIH07XG4gIFxuICAvLyBFdmVudDogaGFzaGNoYW5nZSBldmVudCAoQkJRKVxuICAvLyBcbiAgLy8gVXNhZ2UgaW4galF1ZXJ5IDEuNCBhbmQgbmV3ZXI6XG4gIC8vIFxuICAvLyBJbiBqUXVlcnkgMS40IGFuZCBuZXdlciwgdGhlIGV2ZW50IG9iamVjdCBwYXNzZWQgaW50byBhbnkgaGFzaGNoYW5nZSBldmVudFxuICAvLyBjYWxsYmFjayBpcyBhdWdtZW50ZWQgd2l0aCBhIGNvcHkgb2YgdGhlIGxvY2F0aW9uLmhhc2ggZnJhZ21lbnQgYXQgdGhlIHRpbWVcbiAgLy8gdGhlIGV2ZW50IHdhcyB0cmlnZ2VyZWQgYXMgaXRzIGV2ZW50LmZyYWdtZW50IHByb3BlcnR5LiBJbiBhZGRpdGlvbiwgdGhlXG4gIC8vIGV2ZW50LmdldFN0YXRlIG1ldGhvZCBvcGVyYXRlcyBvbiB0aGlzIHByb3BlcnR5IChpbnN0ZWFkIG9mIGxvY2F0aW9uLmhhc2gpXG4gIC8vIHdoaWNoIGFsbG93cyB0aGlzIGZyYWdtZW50LWFzLWEtc3RhdGUgdG8gYmUgcmVmZXJlbmNlZCBsYXRlciwgZXZlbiBhZnRlclxuICAvLyB3aW5kb3cubG9jYXRpb24gbWF5IGhhdmUgY2hhbmdlZC5cbiAgLy8gXG4gIC8vIE5vdGUgdGhhdCBldmVudC5mcmFnbWVudCBhbmQgZXZlbnQuZ2V0U3RhdGUgYXJlIG5vdCBkZWZpbmVkIGFjY29yZGluZyB0b1xuICAvLyBXM0MgKG9yIGFueSBvdGhlcikgc3BlY2lmaWNhdGlvbiwgYnV0IHdpbGwgc3RpbGwgYmUgYXZhaWxhYmxlIHdoZXRoZXIgb3JcbiAgLy8gbm90IHRoZSBoYXNoY2hhbmdlIGV2ZW50IGV4aXN0cyBuYXRpdmVseSBpbiB0aGUgYnJvd3NlciwgYmVjYXVzZSBvZiB0aGVcbiAgLy8gdXRpbGl0eSB0aGV5IHByb3ZpZGUuXG4gIC8vIFxuICAvLyBUaGUgZXZlbnQuZnJhZ21lbnQgcHJvcGVydHkgY29udGFpbnMgdGhlIG91dHB1dCBvZiA8alF1ZXJ5LnBhcmFtLmZyYWdtZW50PlxuICAvLyBhbmQgdGhlIGV2ZW50LmdldFN0YXRlIG1ldGhvZCBpcyBlcXVpdmFsZW50IHRvIHRoZSA8alF1ZXJ5LmJicS5nZXRTdGF0ZT5cbiAgLy8gbWV0aG9kLlxuICAvLyBcbiAgLy8gPiAkKHdpbmRvdykuYmluZCggJ2hhc2hjaGFuZ2UnLCBmdW5jdGlvbiggZXZlbnQgKSB7XG4gIC8vID4gICB2YXIgaGFzaF9zdHIgPSBldmVudC5mcmFnbWVudCxcbiAgLy8gPiAgICAgcGFyYW1fb2JqID0gZXZlbnQuZ2V0U3RhdGUoKSxcbiAgLy8gPiAgICAgcGFyYW1fdmFsID0gZXZlbnQuZ2V0U3RhdGUoICdwYXJhbV9uYW1lJyApLFxuICAvLyA+ICAgICBwYXJhbV92YWxfY29lcmNlZCA9IGV2ZW50LmdldFN0YXRlKCAncGFyYW1fbmFtZScsIHRydWUgKTtcbiAgLy8gPiAgIC4uLlxuICAvLyA+IH0pO1xuICAvLyBcbiAgLy8gVXNhZ2UgaW4galF1ZXJ5IDEuMy4yOlxuICAvLyBcbiAgLy8gSW4galF1ZXJ5IDEuMy4yLCB0aGUgZXZlbnQgb2JqZWN0IGNhbm5vdCB0byBiZSBhdWdtZW50ZWQgYXMgaW4galF1ZXJ5IDEuNCssXG4gIC8vIHNvIHRoZSBmcmFnbWVudCBzdGF0ZSBpc24ndCBib3VuZCB0byB0aGUgZXZlbnQgb2JqZWN0IGFuZCBtdXN0IGluc3RlYWQgYmVcbiAgLy8gcGFyc2VkIHVzaW5nIHRoZSA8alF1ZXJ5LnBhcmFtLmZyYWdtZW50PiBhbmQgPGpRdWVyeS5iYnEuZ2V0U3RhdGU+IG1ldGhvZHMuXG4gIC8vIFxuICAvLyA+ICQod2luZG93KS5iaW5kKCAnaGFzaGNoYW5nZScsIGZ1bmN0aW9uKCBldmVudCApIHtcbiAgLy8gPiAgIHZhciBoYXNoX3N0ciA9ICQucGFyYW0uZnJhZ21lbnQoKSxcbiAgLy8gPiAgICAgcGFyYW1fb2JqID0gJC5iYnEuZ2V0U3RhdGUoKSxcbiAgLy8gPiAgICAgcGFyYW1fdmFsID0gJC5iYnEuZ2V0U3RhdGUoICdwYXJhbV9uYW1lJyApLFxuICAvLyA+ICAgICBwYXJhbV92YWxfY29lcmNlZCA9ICQuYmJxLmdldFN0YXRlKCAncGFyYW1fbmFtZScsIHRydWUgKTtcbiAgLy8gPiAgIC4uLlxuICAvLyA+IH0pO1xuICAvLyBcbiAgLy8gQWRkaXRpb25hbCBOb3RlczpcbiAgLy8gXG4gIC8vICogRHVlIHRvIGNoYW5nZXMgaW4gdGhlIHNwZWNpYWwgZXZlbnRzIEFQSSwgalF1ZXJ5IEJCUSB2MS4yIG9yIG5ld2VyIGlzXG4gIC8vICAgcmVxdWlyZWQgdG8gZW5hYmxlIHRoZSBhdWdtZW50ZWQgZXZlbnQgb2JqZWN0IGluIGpRdWVyeSAxLjQuMiBhbmQgbmV3ZXIuXG4gIC8vICogU2VlIDxqUXVlcnkgaGFzaGNoYW5nZSBldmVudD4gZm9yIG1vcmUgZGV0YWlsZWQgaW5mb3JtYXRpb24uXG4gIFxuICBqcV9ldmVudF9zcGVjaWFsWyBzdHJfaGFzaGNoYW5nZSBdID0gJC5leHRlbmQoIGpxX2V2ZW50X3NwZWNpYWxbIHN0cl9oYXNoY2hhbmdlIF0sIHtcbiAgICBcbiAgICAvLyBBdWdtZW50aW5nIHRoZSBldmVudCBvYmplY3Qgd2l0aCB0aGUgLmZyYWdtZW50IHByb3BlcnR5IGFuZCAuZ2V0U3RhdGVcbiAgICAvLyBtZXRob2QgcmVxdWlyZXMgalF1ZXJ5IDEuNCBvciBuZXdlci4gTm90ZTogd2l0aCAxLjMuMiwgZXZlcnl0aGluZyB3aWxsXG4gICAgLy8gd29yaywgYnV0IHRoZSBldmVudCB3b24ndCBiZSBhdWdtZW50ZWQpXG4gICAgYWRkOiBmdW5jdGlvbiggaGFuZGxlT2JqICkge1xuICAgICAgdmFyIG9sZF9oYW5kbGVyO1xuICAgICAgXG4gICAgICBmdW5jdGlvbiBuZXdfaGFuZGxlcihlKSB7XG4gICAgICAgIC8vIGUuZnJhZ21lbnQgaXMgc2V0IHRvIHRoZSB2YWx1ZSBvZiBsb2NhdGlvbi5oYXNoICh3aXRoIGFueSBsZWFkaW5nICNcbiAgICAgICAgLy8gcmVtb3ZlZCkgYXQgdGhlIHRpbWUgdGhlIGV2ZW50IGlzIHRyaWdnZXJlZC5cbiAgICAgICAgdmFyIGhhc2ggPSBlWyBzdHJfZnJhZ21lbnQgXSA9IGpxX3BhcmFtX2ZyYWdtZW50KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBlLmdldFN0YXRlKCkgd29ya3MganVzdCBsaWtlICQuYmJxLmdldFN0YXRlKCksIGJ1dCB1c2VzIHRoZVxuICAgICAgICAvLyBlLmZyYWdtZW50IHByb3BlcnR5IHN0b3JlZCBvbiB0aGUgZXZlbnQgb2JqZWN0LlxuICAgICAgICBlLmdldFN0YXRlID0gZnVuY3Rpb24oIGtleSwgY29lcmNlICkge1xuICAgICAgICAgIHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCB8fCB0eXBlb2Yga2V5ID09PSAnYm9vbGVhbidcbiAgICAgICAgICAgID8ganFfZGVwYXJhbSggaGFzaCwga2V5ICkgLy8gJ2tleScgcmVhbGx5IG1lYW5zICdjb2VyY2UnIGhlcmVcbiAgICAgICAgICAgIDoganFfZGVwYXJhbSggaGFzaCwgY29lcmNlIClbIGtleSBdO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgb2xkX2hhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuICAgICAgfTtcbiAgICAgIFxuICAgICAgLy8gVGhpcyBtYXkgc2VlbSBhIGxpdHRsZSBjb21wbGljYXRlZCwgYnV0IGl0IG5vcm1hbGl6ZXMgdGhlIHNwZWNpYWwgZXZlbnRcbiAgICAgIC8vIC5hZGQgbWV0aG9kIGJldHdlZW4galF1ZXJ5IDEuNC8xLjQuMSBhbmQgMS40LjIrXG4gICAgICBpZiAoICQuaXNGdW5jdGlvbiggaGFuZGxlT2JqICkgKSB7XG4gICAgICAgIC8vIDEuNCwgMS40LjFcbiAgICAgICAgb2xkX2hhbmRsZXIgPSBoYW5kbGVPYmo7XG4gICAgICAgIHJldHVybiBuZXdfaGFuZGxlcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIDEuNC4yK1xuICAgICAgICBvbGRfaGFuZGxlciA9IGhhbmRsZU9iai5oYW5kbGVyO1xuICAgICAgICBoYW5kbGVPYmouaGFuZGxlciA9IG5ld19oYW5kbGVyO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgfSk7XG4gIFxufSkoalF1ZXJ5LHRoaXMpO1xuXG4vKiFcbiAqIGpRdWVyeSBoYXNoY2hhbmdlIGV2ZW50IC0gdjEuMiAtIDIvMTEvMjAxMFxuICogaHR0cDovL2JlbmFsbWFuLmNvbS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS1wbHVnaW4vXG4gKiBcbiAqIENvcHlyaWdodCAoYykgMjAxMCBcIkNvd2JveVwiIEJlbiBBbG1hblxuICogRHVhbCBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGFuZCBHUEwgbGljZW5zZXMuXG4gKiBodHRwOi8vYmVuYWxtYW4uY29tL2Fib3V0L2xpY2Vuc2UvXG4gKi9cblxuLy8gU2NyaXB0OiBqUXVlcnkgaGFzaGNoYW5nZSBldmVudFxuLy9cbi8vICpWZXJzaW9uOiAxLjIsIExhc3QgdXBkYXRlZDogMi8xMS8yMDEwKlxuLy8gXG4vLyBQcm9qZWN0IEhvbWUgLSBodHRwOi8vYmVuYWxtYW4uY29tL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlLXBsdWdpbi9cbi8vIEdpdEh1YiAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktaGFzaGNoYW5nZS9cbi8vIFNvdXJjZSAgICAgICAtIGh0dHA6Ly9naXRodWIuY29tL2Nvd2JveS9qcXVlcnktaGFzaGNoYW5nZS9yYXcvbWFzdGVyL2pxdWVyeS5iYS1oYXNoY2hhbmdlLmpzXG4vLyAoTWluaWZpZWQpICAgLSBodHRwOi8vZ2l0aHViLmNvbS9jb3dib3kvanF1ZXJ5LWhhc2hjaGFuZ2UvcmF3L21hc3Rlci9qcXVlcnkuYmEtaGFzaGNoYW5nZS5taW4uanMgKDEuMWtiKVxuLy8gXG4vLyBBYm91dDogTGljZW5zZVxuLy8gXG4vLyBDb3B5cmlnaHQgKGMpIDIwMTAgXCJDb3dib3lcIiBCZW4gQWxtYW4sXG4vLyBEdWFsIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgYW5kIEdQTCBsaWNlbnNlcy5cbi8vIGh0dHA6Ly9iZW5hbG1hbi5jb20vYWJvdXQvbGljZW5zZS9cbi8vIFxuLy8gQWJvdXQ6IEV4YW1wbGVzXG4vLyBcbi8vIFRoaXMgd29ya2luZyBleGFtcGxlLCBjb21wbGV0ZSB3aXRoIGZ1bGx5IGNvbW1lbnRlZCBjb2RlLCBpbGx1c3RyYXRlIG9uZSB3YXlcbi8vIGluIHdoaWNoIHRoaXMgcGx1Z2luIGNhbiBiZSB1c2VkLlxuLy8gXG4vLyBoYXNoY2hhbmdlIGV2ZW50IC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2hhc2hjaGFuZ2UvXG4vLyBcbi8vIEFib3V0OiBTdXBwb3J0IGFuZCBUZXN0aW5nXG4vLyBcbi8vIEluZm9ybWF0aW9uIGFib3V0IHdoYXQgdmVyc2lvbiBvciB2ZXJzaW9ucyBvZiBqUXVlcnkgdGhpcyBwbHVnaW4gaGFzIGJlZW5cbi8vIHRlc3RlZCB3aXRoLCB3aGF0IGJyb3dzZXJzIGl0IGhhcyBiZWVuIHRlc3RlZCBpbiwgYW5kIHdoZXJlIHRoZSB1bml0IHRlc3RzXG4vLyByZXNpZGUgKHNvIHlvdSBjYW4gdGVzdCBpdCB5b3Vyc2VsZikuXG4vLyBcbi8vIGpRdWVyeSBWZXJzaW9ucyAtIDEuMy4yLCAxLjQuMSwgMS40LjJcbi8vIEJyb3dzZXJzIFRlc3RlZCAtIEludGVybmV0IEV4cGxvcmVyIDYtOCwgRmlyZWZveCAyLTMuNywgU2FmYXJpIDMtNCwgQ2hyb21lLCBPcGVyYSA5LjYtMTAuMS5cbi8vIFVuaXQgVGVzdHMgICAgICAtIGh0dHA6Ly9iZW5hbG1hbi5jb20vY29kZS9wcm9qZWN0cy9qcXVlcnktaGFzaGNoYW5nZS91bml0L1xuLy8gXG4vLyBBYm91dDogS25vd24gaXNzdWVzXG4vLyBcbi8vIFdoaWxlIHRoaXMgalF1ZXJ5IGhhc2hjaGFuZ2UgZXZlbnQgaW1wbGVtZW50YXRpb24gaXMgcXVpdGUgc3RhYmxlIGFuZCByb2J1c3QsXG4vLyB0aGVyZSBhcmUgYSBmZXcgdW5mb3J0dW5hdGUgYnJvd3NlciBidWdzIHN1cnJvdW5kaW5nIGV4cGVjdGVkIGhhc2hjaGFuZ2Vcbi8vIGV2ZW50LWJhc2VkIGJlaGF2aW9ycywgaW5kZXBlbmRlbnQgb2YgYW55IEphdmFTY3JpcHQgd2luZG93Lm9uaGFzaGNoYW5nZVxuLy8gYWJzdHJhY3Rpb24uIFNlZSB0aGUgZm9sbG93aW5nIGV4YW1wbGVzIGZvciBtb3JlIGluZm9ybWF0aW9uOlxuLy8gXG4vLyBDaHJvbWU6IEJhY2sgQnV0dG9uIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy1jaHJvbWUtYmFjay1idXR0b24vXG4vLyBGaXJlZm94OiBSZW1vdGUgWE1MSHR0cFJlcXVlc3QgLSBodHRwOi8vYmVuYWxtYW4uY29tL2NvZGUvcHJvamVjdHMvanF1ZXJ5LWhhc2hjaGFuZ2UvZXhhbXBsZXMvYnVnLWZpcmVmb3gtcmVtb3RlLXhoci9cbi8vIFdlYktpdDogQmFjayBCdXR0b24gaW4gYW4gSWZyYW1lIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy13ZWJraXQtaGFzaC1pZnJhbWUvXG4vLyBTYWZhcmk6IEJhY2sgQnV0dG9uIGZyb20gYSBkaWZmZXJlbnQgZG9tYWluIC0gaHR0cDovL2JlbmFsbWFuLmNvbS9jb2RlL3Byb2plY3RzL2pxdWVyeS1oYXNoY2hhbmdlL2V4YW1wbGVzL2J1Zy1zYWZhcmktYmFjay1mcm9tLWRpZmYtZG9tYWluL1xuLy8gXG4vLyBBYm91dDogUmVsZWFzZSBIaXN0b3J5XG4vLyBcbi8vIDEuMiAgIC0gKDIvMTEvMjAxMCkgRml4ZWQgYSBidWcgd2hlcmUgY29taW5nIGJhY2sgdG8gYSBwYWdlIHVzaW5nIHRoaXMgcGx1Z2luXG4vLyAgICAgICAgIGZyb20gYSBwYWdlIG9uIGFub3RoZXIgZG9tYWluIHdvdWxkIGNhdXNlIGFuIGVycm9yIGluIFNhZmFyaSA0LiBBbHNvLFxuLy8gICAgICAgICBJRTYvNyBJZnJhbWUgaXMgbm93IGluc2VydGVkIGFmdGVyIHRoZSBib2R5ICh0aGlzIGFjdHVhbGx5IHdvcmtzKSxcbi8vICAgICAgICAgd2hpY2ggcHJldmVudHMgdGhlIHBhZ2UgZnJvbSBzY3JvbGxpbmcgd2hlbiB0aGUgZXZlbnQgaXMgZmlyc3QgYm91bmQuXG4vLyAgICAgICAgIEV2ZW50IGNhbiBhbHNvIG5vdyBiZSBib3VuZCBiZWZvcmUgRE9NIHJlYWR5LCBidXQgaXQgd29uJ3QgYmUgdXNhYmxlXG4vLyAgICAgICAgIGJlZm9yZSB0aGVuIGluIElFNi83LlxuLy8gMS4xICAgLSAoMS8yMS8yMDEwKSBJbmNvcnBvcmF0ZWQgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIHRlc3QgdG8gZml4IElFOCBidWdcbi8vICAgICAgICAgd2hlcmUgYnJvd3NlciB2ZXJzaW9uIGlzIGluY29ycmVjdGx5IHJlcG9ydGVkIGFzIDguMCwgZGVzcGl0ZVxuLy8gICAgICAgICBpbmNsdXNpb24gb2YgdGhlIFgtVUEtQ29tcGF0aWJsZSBJRT1FbXVsYXRlSUU3IG1ldGEgdGFnLlxuLy8gMS4wICAgLSAoMS85LzIwMTApIEluaXRpYWwgUmVsZWFzZS4gQnJva2Ugb3V0IHRoZSBqUXVlcnkgQkJRIGV2ZW50LnNwZWNpYWxcbi8vICAgICAgICAgd2luZG93Lm9uaGFzaGNoYW5nZSBmdW5jdGlvbmFsaXR5IGludG8gYSBzZXBhcmF0ZSBwbHVnaW4gZm9yIHVzZXJzXG4vLyAgICAgICAgIHdobyB3YW50IGp1c3QgdGhlIGJhc2ljIGV2ZW50ICYgYmFjayBidXR0b24gc3VwcG9ydCwgd2l0aG91dCBhbGwgdGhlXG4vLyAgICAgICAgIGV4dHJhIGF3ZXNvbWVuZXNzIHRoYXQgQkJRIHByb3ZpZGVzLiBUaGlzIHBsdWdpbiB3aWxsIGJlIGluY2x1ZGVkIGFzXG4vLyAgICAgICAgIHBhcnQgb2YgalF1ZXJ5IEJCUSwgYnV0IGFsc28gYmUgYXZhaWxhYmxlIHNlcGFyYXRlbHkuXG5cbihmdW5jdGlvbigkLHdpbmRvdyx1bmRlZmluZWQpe1xuICAnJDpub211bmdlJzsgLy8gVXNlZCBieSBZVUkgY29tcHJlc3Nvci5cbiAgXG4gIC8vIE1ldGhvZCAvIG9iamVjdCByZWZlcmVuY2VzLlxuICB2YXIgZmFrZV9vbmhhc2hjaGFuZ2UsXG4gICAganFfZXZlbnRfc3BlY2lhbCA9ICQuZXZlbnQuc3BlY2lhbCxcbiAgICBcbiAgICAvLyBSZXVzZWQgc3RyaW5ncy5cbiAgICBzdHJfbG9jYXRpb24gPSAnbG9jYXRpb24nLFxuICAgIHN0cl9oYXNoY2hhbmdlID0gJ2hhc2hjaGFuZ2UnLFxuICAgIHN0cl9ocmVmID0gJ2hyZWYnLFxuICAgIFxuICAgIC8vIElFNi83IHNwZWNpZmljYWxseSBuZWVkIHNvbWUgc3BlY2lhbCBsb3ZlIHdoZW4gaXQgY29tZXMgdG8gYmFjay1idXR0b25cbiAgICAvLyBzdXBwb3J0LCBzbyBsZXQncyBkbyBhIGxpdHRsZSBicm93c2VyIHNuaWZmaW5nLi5cbiAgICBicm93c2VyID0gJC5icm93c2VyLFxuICAgIG1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGUsXG4gICAgaXNfb2xkX2llID0gYnJvd3Nlci5tc2llICYmICggbW9kZSA9PT0gdW5kZWZpbmVkIHx8IG1vZGUgPCA4ICksXG4gICAgXG4gICAgLy8gRG9lcyB0aGUgYnJvd3NlciBzdXBwb3J0IHdpbmRvdy5vbmhhc2hjaGFuZ2U/IFRlc3QgZm9yIElFIHZlcnNpb24sIHNpbmNlXG4gICAgLy8gSUU4IGluY29ycmVjdGx5IHJlcG9ydHMgdGhpcyB3aGVuIGluIFwiSUU3XCIgb3IgXCJJRTggQ29tcGF0aWJpbGl0eSBWaWV3XCIhXG4gICAgc3VwcG9ydHNfb25oYXNoY2hhbmdlID0gJ29uJyArIHN0cl9oYXNoY2hhbmdlIGluIHdpbmRvdyAmJiAhaXNfb2xkX2llO1xuICBcbiAgLy8gR2V0IGxvY2F0aW9uLmhhc2ggKG9yIHdoYXQgeW91J2QgZXhwZWN0IGxvY2F0aW9uLmhhc2ggdG8gYmUpIHNhbnMgYW55XG4gIC8vIGxlYWRpbmcgIy4gVGhhbmtzIGZvciBtYWtpbmcgdGhpcyBuZWNlc3NhcnksIEZpcmVmb3ghXG4gIGZ1bmN0aW9uIGdldF9mcmFnbWVudCggdXJsICkge1xuICAgIHVybCA9IHVybCB8fCB3aW5kb3dbIHN0cl9sb2NhdGlvbiBdWyBzdHJfaHJlZiBdO1xuICAgIHJldHVybiB1cmwucmVwbGFjZSggL15bXiNdKiM/KC4qKSQvLCAnJDEnICk7XG4gIH07XG4gIFxuICAvLyBQcm9wZXJ0eTogalF1ZXJ5Lmhhc2hjaGFuZ2VEZWxheVxuICAvLyBcbiAgLy8gVGhlIG51bWVyaWMgaW50ZXJ2YWwgKGluIG1pbGxpc2Vjb25kcykgYXQgd2hpY2ggdGhlIDxoYXNoY2hhbmdlIGV2ZW50PlxuICAvLyBwb2xsaW5nIGxvb3AgZXhlY3V0ZXMuIERlZmF1bHRzIHRvIDEwMC5cbiAgXG4gICRbIHN0cl9oYXNoY2hhbmdlICsgJ0RlbGF5JyBdID0gMTAwO1xuICBcbiAgLy8gRXZlbnQ6IGhhc2hjaGFuZ2UgZXZlbnRcbiAgLy8gXG4gIC8vIEZpcmVkIHdoZW4gbG9jYXRpb24uaGFzaCBjaGFuZ2VzLiBJbiBicm93c2VycyB0aGF0IHN1cHBvcnQgaXQsIHRoZSBuYXRpdmVcbiAgLy8gd2luZG93Lm9uaGFzaGNoYW5nZSBldmVudCBpcyB1c2VkIChJRTgsIEZGMy42KSwgb3RoZXJ3aXNlIGEgcG9sbGluZyBsb29wIGlzXG4gIC8vIGluaXRpYWxpemVkLCBydW5uaW5nIGV2ZXJ5IDxqUXVlcnkuaGFzaGNoYW5nZURlbGF5PiBtaWxsaXNlY29uZHMgdG8gc2VlIGlmXG4gIC8vIHRoZSBoYXNoIGhhcyBjaGFuZ2VkLiBJbiBJRSA2IGFuZCA3LCBhIGhpZGRlbiBJZnJhbWUgaXMgY3JlYXRlZCB0byBhbGxvd1xuICAvLyB0aGUgYmFjayBidXR0b24gYW5kIGhhc2gtYmFzZWQgaGlzdG9yeSB0byB3b3JrLlxuICAvLyBcbiAgLy8gVXNhZ2U6XG4gIC8vIFxuICAvLyA+ICQod2luZG93KS5iaW5kKCAnaGFzaGNoYW5nZScsIGZ1bmN0aW9uKGUpIHtcbiAgLy8gPiAgIHZhciBoYXNoID0gbG9jYXRpb24uaGFzaDtcbiAgLy8gPiAgIC4uLlxuICAvLyA+IH0pO1xuICAvLyBcbiAgLy8gQWRkaXRpb25hbCBOb3RlczpcbiAgLy8gXG4gIC8vICogVGhlIHBvbGxpbmcgbG9vcCBhbmQgSWZyYW1lIGFyZSBub3QgY3JlYXRlZCB1bnRpbCBhdCBsZWFzdCBvbmUgY2FsbGJhY2tcbiAgLy8gICBpcyBhY3R1YWxseSBib3VuZCB0byAnaGFzaGNoYW5nZScuXG4gIC8vICogSWYgeW91IG5lZWQgdGhlIGJvdW5kIGNhbGxiYWNrKHMpIHRvIGV4ZWN1dGUgaW1tZWRpYXRlbHksIGluIGNhc2VzIHdoZXJlXG4gIC8vICAgdGhlIHBhZ2UgJ3N0YXRlJyBleGlzdHMgb24gcGFnZSBsb2FkICh2aWEgYm9va21hcmsgb3IgcGFnZSByZWZyZXNoLCBmb3JcbiAgLy8gICBleGFtcGxlKSB1c2UgJCh3aW5kb3cpLnRyaWdnZXIoICdoYXNoY2hhbmdlJyApO1xuICAvLyAqIFRoZSBldmVudCBjYW4gYmUgYm91bmQgYmVmb3JlIERPTSByZWFkeSwgYnV0IHNpbmNlIGl0IHdvbid0IGJlIHVzYWJsZVxuICAvLyAgIGJlZm9yZSB0aGVuIGluIElFNi83IChkdWUgdG8gdGhlIG5lY2Vzc2FyeSBJZnJhbWUpLCByZWNvbW1lbmRlZCB1c2FnZSBpc1xuICAvLyAgIHRvIGJpbmQgaXQgaW5zaWRlIGEgJChkb2N1bWVudCkucmVhZHkoKSBjYWxsYmFjay5cbiAgXG4gIGpxX2V2ZW50X3NwZWNpYWxbIHN0cl9oYXNoY2hhbmdlIF0gPSAkLmV4dGVuZCgganFfZXZlbnRfc3BlY2lhbFsgc3RyX2hhc2hjaGFuZ2UgXSwge1xuICAgIFxuICAgIC8vIENhbGxlZCBvbmx5IHdoZW4gdGhlIGZpcnN0ICdoYXNoY2hhbmdlJyBldmVudCBpcyBib3VuZCB0byB3aW5kb3cuXG4gICAgc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gSWYgd2luZG93Lm9uaGFzaGNoYW5nZSBpcyBzdXBwb3J0ZWQgbmF0aXZlbHksIHRoZXJlJ3Mgbm90aGluZyB0byBkby4uXG4gICAgICBpZiAoIHN1cHBvcnRzX29uaGFzaGNoYW5nZSApIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgICBcbiAgICAgIC8vIE90aGVyd2lzZSwgd2UgbmVlZCB0byBjcmVhdGUgb3VyIG93bi4gQW5kIHdlIGRvbid0IHdhbnQgdG8gY2FsbCB0aGlzXG4gICAgICAvLyB1bnRpbCB0aGUgdXNlciBiaW5kcyB0byB0aGUgZXZlbnQsIGp1c3QgaW4gY2FzZSB0aGV5IG5ldmVyIGRvLCBzaW5jZSBpdFxuICAgICAgLy8gd2lsbCBjcmVhdGUgYSBwb2xsaW5nIGxvb3AgYW5kIHBvc3NpYmx5IGV2ZW4gYSBoaWRkZW4gSWZyYW1lLlxuICAgICAgJCggZmFrZV9vbmhhc2hjaGFuZ2Uuc3RhcnQgKTtcbiAgICB9LFxuICAgIFxuICAgIC8vIENhbGxlZCBvbmx5IHdoZW4gdGhlIGxhc3QgJ2hhc2hjaGFuZ2UnIGV2ZW50IGlzIHVuYm91bmQgZnJvbSB3aW5kb3cuXG4gICAgdGVhcmRvd246IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gSWYgd2luZG93Lm9uaGFzaGNoYW5nZSBpcyBzdXBwb3J0ZWQgbmF0aXZlbHksIHRoZXJlJ3Mgbm90aGluZyB0byBkby4uXG4gICAgICBpZiAoIHN1cHBvcnRzX29uaGFzaGNoYW5nZSApIHsgcmV0dXJuIGZhbHNlOyB9XG4gICAgICBcbiAgICAgIC8vIE90aGVyd2lzZSwgd2UgbmVlZCB0byBzdG9wIG91cnMgKGlmIHBvc3NpYmxlKS5cbiAgICAgICQoIGZha2Vfb25oYXNoY2hhbmdlLnN0b3AgKTtcbiAgICB9XG4gICAgXG4gIH0pO1xuICBcbiAgLy8gZmFrZV9vbmhhc2hjaGFuZ2UgZG9lcyBhbGwgdGhlIHdvcmsgb2YgdHJpZ2dlcmluZyB0aGUgd2luZG93Lm9uaGFzaGNoYW5nZVxuICAvLyBldmVudCBmb3IgYnJvd3NlcnMgdGhhdCBkb24ndCBuYXRpdmVseSBzdXBwb3J0IGl0LCBpbmNsdWRpbmcgY3JlYXRpbmcgYVxuICAvLyBwb2xsaW5nIGxvb3AgdG8gd2F0Y2ggZm9yIGhhc2ggY2hhbmdlcyBhbmQgaW4gSUUgNi83IGNyZWF0aW5nIGEgaGlkZGVuXG4gIC8vIElmcmFtZSB0byBlbmFibGUgYmFjayBhbmQgZm9yd2FyZC5cbiAgZmFrZV9vbmhhc2hjaGFuZ2UgPSAoZnVuY3Rpb24oKXtcbiAgICB2YXIgc2VsZiA9IHt9LFxuICAgICAgdGltZW91dF9pZCxcbiAgICAgIGlmcmFtZSxcbiAgICAgIHNldF9oaXN0b3J5LFxuICAgICAgZ2V0X2hpc3Rvcnk7XG4gICAgXG4gICAgLy8gSW5pdGlhbGl6ZS4gSW4gSUUgNi83LCBjcmVhdGVzIGEgaGlkZGVuIElmcmFtZSBmb3IgaGlzdG9yeSBoYW5kbGluZy5cbiAgICBmdW5jdGlvbiBpbml0KCl7XG4gICAgICAvLyBNb3N0IGJyb3dzZXJzIGRvbid0IG5lZWQgc3BlY2lhbCBtZXRob2RzIGhlcmUuLlxuICAgICAgc2V0X2hpc3RvcnkgPSBnZXRfaGlzdG9yeSA9IGZ1bmN0aW9uKHZhbCl7IHJldHVybiB2YWw7IH07XG4gICAgICBcbiAgICAgIC8vIEJ1dCBJRTYvNyBkbyFcbiAgICAgIGlmICggaXNfb2xkX2llICkge1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIGhpZGRlbiBJZnJhbWUgYWZ0ZXIgdGhlIGVuZCBvZiB0aGUgYm9keSB0byBwcmV2ZW50IGluaXRpYWxcbiAgICAgICAgLy8gcGFnZSBsb2FkIGZyb20gc2Nyb2xsaW5nIHVubmVjZXNzYXJpbHkuXG4gICAgICAgIGlmcmFtZSA9ICQoJzxpZnJhbWUgc3JjPVwiamF2YXNjcmlwdDowXCIvPicpLmhpZGUoKS5pbnNlcnRBZnRlciggJ2JvZHknIClbMF0uY29udGVudFdpbmRvdztcbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBoaXN0b3J5IGJ5IGxvb2tpbmcgYXQgdGhlIGhpZGRlbiBJZnJhbWUncyBsb2NhdGlvbi5oYXNoLlxuICAgICAgICBnZXRfaGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHJldHVybiBnZXRfZnJhZ21lbnQoIGlmcmFtZS5kb2N1bWVudFsgc3RyX2xvY2F0aW9uIF1bIHN0cl9ocmVmIF0gKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBhIG5ldyBoaXN0b3J5IGl0ZW0gYnkgb3BlbmluZyBhbmQgdGhlbiBjbG9zaW5nIHRoZSBJZnJhbWVcbiAgICAgICAgLy8gZG9jdW1lbnQsICp0aGVuKiBzZXR0aW5nIGl0cyBsb2NhdGlvbi5oYXNoLlxuICAgICAgICBzZXRfaGlzdG9yeSA9IGZ1bmN0aW9uKCBoYXNoLCBoaXN0b3J5X2hhc2ggKSB7XG4gICAgICAgICAgaWYgKCBoYXNoICE9PSBoaXN0b3J5X2hhc2ggKSB7XG4gICAgICAgICAgICB2YXIgZG9jID0gaWZyYW1lLmRvY3VtZW50O1xuICAgICAgICAgICAgZG9jLm9wZW4oKS5jbG9zZSgpO1xuICAgICAgICAgICAgZG9jWyBzdHJfbG9jYXRpb24gXS5oYXNoID0gJyMnICsgaGFzaDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgaW5pdGlhbCBoaXN0b3J5LlxuICAgICAgICBzZXRfaGlzdG9yeSggZ2V0X2ZyYWdtZW50KCkgKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIFN0YXJ0IHRoZSBwb2xsaW5nIGxvb3AuXG4gICAgc2VsZi5zdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgLy8gUG9sbGluZyBsb29wIGlzIGFscmVhZHkgcnVubmluZyFcbiAgICAgIGlmICggdGltZW91dF9pZCApIHsgcmV0dXJuOyB9XG4gICAgICBcbiAgICAgIC8vIFJlbWVtYmVyIHRoZSBpbml0aWFsIGhhc2ggc28gaXQgZG9lc24ndCBnZXQgdHJpZ2dlcmVkIGltbWVkaWF0ZWx5LlxuICAgICAgdmFyIGxhc3RfaGFzaCA9IGdldF9mcmFnbWVudCgpO1xuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIGlmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQuXG4gICAgICBzZXRfaGlzdG9yeSB8fCBpbml0KCk7XG4gICAgICBcbiAgICAgIC8vIFRoaXMgcG9sbGluZyBsb29wIGNoZWNrcyBldmVyeSAkLmhhc2hjaGFuZ2VEZWxheSBtaWxsaXNlY29uZHMgdG8gc2VlIGlmXG4gICAgICAvLyBsb2NhdGlvbi5oYXNoIGhhcyBjaGFuZ2VkLCBhbmQgdHJpZ2dlcnMgdGhlICdoYXNoY2hhbmdlJyBldmVudCBvblxuICAgICAgLy8gd2luZG93IHdoZW4gbmVjZXNzYXJ5LlxuICAgICAgKGZ1bmN0aW9uIGxvb3B5KCl7XG4gICAgICAgIHZhciBoYXNoID0gZ2V0X2ZyYWdtZW50KCksXG4gICAgICAgICAgaGlzdG9yeV9oYXNoID0gZ2V0X2hpc3RvcnkoIGxhc3RfaGFzaCApO1xuICAgICAgICBcbiAgICAgICAgaWYgKCBoYXNoICE9PSBsYXN0X2hhc2ggKSB7XG4gICAgICAgICAgc2V0X2hpc3RvcnkoIGxhc3RfaGFzaCA9IGhhc2gsIGhpc3RvcnlfaGFzaCApO1xuICAgICAgICAgIFxuICAgICAgICAgICQod2luZG93KS50cmlnZ2VyKCBzdHJfaGFzaGNoYW5nZSApO1xuICAgICAgICAgIFxuICAgICAgICB9IGVsc2UgaWYgKCBoaXN0b3J5X2hhc2ggIT09IGxhc3RfaGFzaCApIHtcbiAgICAgICAgICB3aW5kb3dbIHN0cl9sb2NhdGlvbiBdWyBzdHJfaHJlZiBdID0gd2luZG93WyBzdHJfbG9jYXRpb24gXVsgc3RyX2hyZWYgXS5yZXBsYWNlKCAvIy4qLywgJycgKSArICcjJyArIGhpc3RvcnlfaGFzaDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgdGltZW91dF9pZCA9IHNldFRpbWVvdXQoIGxvb3B5LCAkWyBzdHJfaGFzaGNoYW5nZSArICdEZWxheScgXSApO1xuICAgICAgfSkoKTtcbiAgICB9O1xuICAgIFxuICAgIC8vIFN0b3AgdGhlIHBvbGxpbmcgbG9vcCwgYnV0IG9ubHkgaWYgYW4gSUU2LzcgSWZyYW1lIHdhc24ndCBjcmVhdGVkLiBJblxuICAgIC8vIHRoYXQgY2FzZSwgZXZlbiBpZiB0aGVyZSBhcmUgbm8gbG9uZ2VyIGFueSBib3VuZCBldmVudCBoYW5kbGVycywgdGhlXG4gICAgLy8gcG9sbGluZyBsb29wIGlzIHN0aWxsIG5lY2Vzc2FyeSBmb3IgYmFjay9uZXh0IHRvIHdvcmsgYXQgYWxsIVxuICAgIHNlbGYuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCAhaWZyYW1lICkge1xuICAgICAgICB0aW1lb3V0X2lkICYmIGNsZWFyVGltZW91dCggdGltZW91dF9pZCApO1xuICAgICAgICB0aW1lb3V0X2lkID0gMDtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIHJldHVybiBzZWxmO1xuICB9KSgpO1xuICBcbn0pKGpRdWVyeSx0aGlzKTtcbiIsIi8vIEF2b2lkIGBjb25zb2xlYCBlcnJvcnMgaW4gYnJvd3NlcnMgdGhhdCBsYWNrIGEgY29uc29sZS5cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgbWV0aG9kO1xuICAgIHZhciBub29wID0gZnVuY3Rpb24gKCkge307XG4gICAgdmFyIG1ldGhvZHMgPSBbXG4gICAgJ2Fzc2VydCcsICdjbGVhcicsICdjb3VudCcsICdkZWJ1ZycsICdkaXInLCAnZGlyeG1sJywgJ2Vycm9yJyxcbiAgICAnZXhjZXB0aW9uJywgJ2dyb3VwJywgJ2dyb3VwQ29sbGFwc2VkJywgJ2dyb3VwRW5kJywgJ2luZm8nLCAnbG9nJyxcbiAgICAnbWFya1RpbWVsaW5lJywgJ3Byb2ZpbGUnLCAncHJvZmlsZUVuZCcsICd0YWJsZScsICd0aW1lJywgJ3RpbWVFbmQnLFxuICAgICd0aW1lbGluZScsICd0aW1lbGluZUVuZCcsICd0aW1lU3RhbXAnLCAndHJhY2UnLCAnd2FybidcbiAgICBdO1xuICAgIHZhciBsZW5ndGggPSBtZXRob2RzLmxlbmd0aDtcbiAgICB2YXIgY29uc29sZSA9ICh3aW5kb3cuY29uc29sZSA9IHdpbmRvdy5jb25zb2xlIHx8IHt9KTtcblxuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgICBtZXRob2QgPSBtZXRob2RzW2xlbmd0aF07XG5cbiAgICAgICAgLy8gT25seSBzdHViIHVuZGVmaW5lZCBtZXRob2RzLlxuICAgICAgICBpZiAoIWNvbnNvbGVbbWV0aG9kXSkge1xuICAgICAgICAgICAgY29uc29sZVttZXRob2RdID0gbm9vcDtcbiAgICAgICAgfVxuICAgIH1cbn0oKSk7XG5cbi8vIFBsYWNlIGFueSBqUXVlcnkvaGVscGVyIHBsdWdpbnMgaW4gaGVyZS5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==